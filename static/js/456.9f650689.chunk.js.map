{"version":3,"file":"static/js/456.9f650689.chunk.js","mappings":"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","sources":["../node_modules/@rexxars/eventsource-polyfill/src/eventsource.js","../node_modules/@sanity/block-content-to-hyperscript/internals.js","../node_modules/@sanity/block-content-to-hyperscript/src/blocksToNodes.js","../node_modules/@sanity/block-content-to-hyperscript/src/buildMarksTree.js","../node_modules/@sanity/block-content-to-hyperscript/src/generateKeys.js","../node_modules/@sanity/block-content-to-hyperscript/src/getImageUrl.js","../node_modules/@sanity/block-content-to-hyperscript/src/internals.js","../node_modules/@sanity/block-content-to-hyperscript/src/mergeSerializers.js","../node_modules/@sanity/block-content-to-hyperscript/src/nestLists.js","../node_modules/@sanity/block-content-to-hyperscript/src/serializers.js","../node_modules/@sanity/block-content-to-hyperscript/node_modules/@sanity/generate-help-url/index.js","../node_modules/@sanity/block-content-to-hyperscript/node_modules/@sanity/image-url/src/parseAssetId.ts","../node_modules/@sanity/block-content-to-hyperscript/node_modules/@sanity/image-url/src/parseSource.ts","../node_modules/@sanity/block-content-to-hyperscript/node_modules/@sanity/image-url/src/urlForImage.ts","../node_modules/@sanity/block-content-to-hyperscript/node_modules/@sanity/image-url/src/builder.ts","../node_modules/@sanity/block-content-to-react/src/BlockContent.js","../node_modules/@sanity/block-content-to-react/src/targets/dom.js","../node_modules/@sanity/block-content-to-react/node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/@sanity/block-content-to-react/node_modules/prop-types/index.js","../node_modules/@sanity/block-content-to-react/node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/@sanity/client/lib/assets/assetsClient.js","../node_modules/@sanity/client/lib/auth/authClient.js","../node_modules/@sanity/client/lib/config.js","../node_modules/@sanity/client/lib/data/dataMethods.js","../node_modules/@sanity/client/lib/data/encodeQueryString.js","../node_modules/@sanity/client/lib/data/listen.js","../node_modules/@sanity/client/lib/data/patch.js","../node_modules/@sanity/client/lib/data/transaction.js","../node_modules/@sanity/client/lib/datasets/datasetsClient.js","../node_modules/@sanity/client/lib/http/browserMiddleware.js","../node_modules/@sanity/client/lib/http/errors.js","../node_modules/@sanity/client/lib/http/queryString.js","../node_modules/@sanity/client/lib/http/request.js","../node_modules/@sanity/client/lib/http/requestOptions.js","../node_modules/@sanity/client/lib/projects/projectsClient.js","../node_modules/@sanity/client/lib/sanityClient.js","../node_modules/@sanity/client/lib/users/usersClient.js","../node_modules/@sanity/client/lib/util/defaults.js","../node_modules/@sanity/client/lib/util/getSelection.js","../node_modules/@sanity/client/lib/util/observable.js","../node_modules/@sanity/client/lib/util/once.js","../node_modules/@sanity/client/lib/util/pick.js","../node_modules/@sanity/client/lib/validators.js","../node_modules/@sanity/client/lib/warnings.js","../node_modules/@sanity/eventsource/browser.js","../node_modules/@sanity/generate-help-url/index.js","../node_modules/@sanity/image-url/src/parseAssetId.ts","../node_modules/@sanity/image-url/src/parseSource.ts","../node_modules/@sanity/image-url/src/urlForImage.ts","../node_modules/@sanity/image-url/src/builder.ts","../node_modules/get-it/index.js","../node_modules/get-it/src/index.js","../node_modules/get-it/src/middleware/defaultOptionsProcessor.js","../node_modules/get-it/src/middleware/defaultOptionsValidator.js","../node_modules/get-it/src/middleware/jsonRequest.js","../node_modules/get-it/src/middleware/jsonResponse.js","../node_modules/get-it/src/middleware/observable.js","../node_modules/get-it/src/middleware/progress/browser-progress.js","../node_modules/get-it/src/middleware/progress/index.js","../node_modules/get-it/src/request/browser-request.js","../node_modules/get-it/src/request/browser/fetchXhr.js","../node_modules/get-it/src/request/index.js","../node_modules/get-it/src/util/global.js","../node_modules/get-it/src/util/middlewareReducer.js","../node_modules/is-plain-object/index.js","../node_modules/isobject/index.js","../node_modules/make-error/index.js","../node_modules/nano-pubsub/index.js","../node_modules/parse-headers/parse-headers.js","../node_modules/querystringify/index.js","../node_modules/requires-port/index.js","../node_modules/rxjs/src/internal/Observable.ts","../node_modules/rxjs/src/internal/Observer.ts","../node_modules/rxjs/src/internal/Subscriber.ts","../node_modules/rxjs/src/internal/Subscription.ts","../node_modules/rxjs/src/internal/config.ts","../node_modules/rxjs/src/internal/operators/filter.ts","../node_modules/rxjs/src/internal/operators/map.ts","../node_modules/rxjs/src/internal/symbol/observable.ts","../node_modules/rxjs/src/internal/symbol/rxSubscriber.ts","../node_modules/rxjs/src/internal/util/UnsubscriptionError.ts","../node_modules/rxjs/src/internal/util/canReportError.ts","../node_modules/rxjs/src/internal/util/hostReportError.ts","../node_modules/rxjs/src/internal/util/identity.ts","../node_modules/rxjs/src/internal/util/isArray.ts","../node_modules/rxjs/src/internal/util/isFunction.ts","../node_modules/rxjs/src/internal/util/isObject.ts","../node_modules/rxjs/src/internal/util/pipe.ts","../node_modules/rxjs/src/internal/util/toSubscriber.ts","../node_modules/same-origin/index.js","../node_modules/same-origin/url-parser.js","../node_modules/url-parse/index.js"],"sourcesContent":["/*\n * EventSource polyfill\n * Originally published by sc AmvTek srl (https://github.com/amvtek/EventSource) - devel@amvtek.com\n * Forked by Espen Hovlandsdal to fix a few issues + publish latest version\n */\n\n;(function (root, factory) {\n  /* global define */\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory()\n  } else {\n    // Browser globals (root is window)\n    if (global.EventSource && !global._eventSourceImportPrefix) {\n      return\n    }\n\n    var evsImportName = (root._eventSourceImportPrefix || '') + 'EventSource'\n    root[evsImportName] = factory()\n  }\n})(typeof self === 'undefined' ? this : self, function () {\n  var EventSource = function (url, options) {\n    if (!url || typeof url != 'string') {\n      throw new SyntaxError('Not enough arguments')\n    }\n\n    this.URL = url\n    this.setOptions(options)\n    var evs = this\n    setTimeout(function () {\n      evs.poll()\n    }, 0)\n  }\n\n  EventSource.prototype = {\n    CONNECTING: 0,\n\n    OPEN: 1,\n\n    CLOSED: 2,\n\n    defaultOptions: {\n      loggingEnabled: false,\n\n      loggingPrefix: 'eventsource',\n\n      interval: 500, // milliseconds\n\n      bufferSizeLimit: 256 * 1024, // bytes\n\n      silentTimeout: 300000, // milliseconds\n\n      getArgs: {\n        evs_buffer_size_limit: 256 * 1024,\n      },\n\n      xhrHeaders: {\n        Accept: 'text/event-stream',\n        'Cache-Control': 'no-cache',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    },\n\n    setOptions: function (options) {\n      var defaults = this.defaultOptions\n      var option\n\n      // set all default options...\n      for (option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          this[option] = defaults[option]\n        }\n      }\n\n      // override with what is in options\n      for (option in options) {\n        if (option in defaults && options.hasOwnProperty(option)) {\n          this[option] = options[option]\n        }\n      }\n\n      // if getArgs option is enabled\n      // ensure evs_buffer_size_limit corresponds to bufferSizeLimit\n      if (this.getArgs && this.bufferSizeLimit) {\n        this.getArgs.evs_buffer_size_limit = this.bufferSizeLimit\n      }\n\n      // if console is not available, force loggingEnabled to false\n      // eslint-disable-next-line no-console\n      if (typeof console === 'undefined' || typeof console.log === 'undefined') {\n        this.loggingEnabled = false\n      }\n    },\n\n    log: function (message) {\n      if (this.loggingEnabled) {\n        // eslint-disable-next-line no-console\n        console.log('[' + this.loggingPrefix + ']:' + message)\n      }\n    },\n\n    poll: function () {\n      try {\n        if (this.readyState == this.CLOSED) {\n          return\n        }\n\n        this.cleanup()\n        this.readyState = this.CONNECTING\n        this.cursor = 0\n        this.cache = ''\n        this._xhr = new this.XHR(this)\n        this.resetNoActivityTimer()\n      } catch (err) {\n        // in an attempt to silence the errors\n        this.log('There were errors inside the pool try-catch')\n        this.dispatchEvent('error', {type: 'error', data: err.message})\n      }\n    },\n\n    pollAgain: function (interval) {\n      // schedule poll to be called after interval milliseconds\n      var evs = this\n      evs.readyState = evs.CONNECTING\n      evs.dispatchEvent('error', {\n        type: 'error',\n        data: 'Reconnecting ',\n      })\n      this._pollTimer = setTimeout(function () {\n        evs.poll()\n      }, interval || 0)\n    },\n\n    cleanup: function () {\n      this.log('evs cleaning up')\n\n      if (this._pollTimer) {\n        clearInterval(this._pollTimer)\n        this._pollTimer = null\n      }\n\n      if (this._noActivityTimer) {\n        clearInterval(this._noActivityTimer)\n        this._noActivityTimer = null\n      }\n\n      if (this._xhr) {\n        this._xhr.abort()\n        this._xhr = null\n      }\n    },\n\n    resetNoActivityTimer: function () {\n      if (this.silentTimeout) {\n        if (this._noActivityTimer) {\n          clearInterval(this._noActivityTimer)\n        }\n        var evs = this\n        this._noActivityTimer = setTimeout(function () {\n          evs.log('Timeout! silentTImeout:' + evs.silentTimeout)\n          evs.pollAgain()\n        }, this.silentTimeout)\n      }\n    },\n\n    close: function () {\n      this.readyState = this.CLOSED\n      this.log('Closing connection. readyState: ' + this.readyState)\n      this.cleanup()\n    },\n\n    _onxhrdata: function () {\n      var request = this._xhr\n\n      if (request.isReady() && !request.hasError()) {\n        // reset the timer, as we have activity\n        this.resetNoActivityTimer()\n\n        // move this EventSource to OPEN state...\n        if (this.readyState == this.CONNECTING) {\n          this.readyState = this.OPEN\n          this.dispatchEvent('open', {type: 'open'})\n        }\n\n        var buffer = request.getBuffer()\n\n        if (buffer.length > this.bufferSizeLimit) {\n          this.log('buffer.length > this.bufferSizeLimit')\n          this.pollAgain()\n        }\n\n        if (this.cursor == 0 && buffer.length > 0) {\n          // skip byte order mark \\uFEFF character if it starts the stream\n          if (buffer.substring(0, 1) == '\\uFEFF') {\n            this.cursor = 1\n          }\n        }\n\n        var lastMessageIndex = this.lastMessageIndex(buffer)\n        if (lastMessageIndex[0] >= this.cursor) {\n          var newcursor = lastMessageIndex[1]\n          var toparse = buffer.substring(this.cursor, newcursor)\n          this.parseStream(toparse)\n          this.cursor = newcursor\n        }\n\n        // if request is finished, reopen the connection\n        if (request.isDone()) {\n          this.log('request.isDone(). reopening the connection')\n          this.pollAgain(this.interval)\n        }\n      } else if (this.readyState !== this.CLOSED) {\n        this.log('this.readyState !== this.CLOSED')\n        this.pollAgain(this.interval)\n\n        //MV: Unsure why an error was previously dispatched\n      }\n    },\n\n    parseStream: function (chunk) {\n      // normalize line separators (\\r\\n,\\r,\\n) to \\n\n      // remove white spaces that may precede \\n\n      chunk = this.cache + this.normalizeToLF(chunk)\n\n      var events = chunk.split('\\n\\n')\n\n      var i, j, eventType, datas, line, retry\n\n      for (i = 0; i < events.length - 1; i++) {\n        eventType = 'message'\n        datas = []\n        var parts = events[i].split('\\n')\n\n        for (j = 0; j < parts.length; j++) {\n          line = this.trimWhiteSpace(parts[j])\n\n          if (line.indexOf('event') == 0) {\n            eventType = line.replace(/event:?\\s*/, '')\n          } else if (line.indexOf('retry') == 0) {\n            retry = parseInt(line.replace(/retry:?\\s*/, ''), 10)\n            if (!isNaN(retry)) {\n              this.interval = retry\n            }\n          } else if (line.indexOf('data') == 0) {\n            datas.push(line.replace(/data:?\\s*/, ''))\n          } else if (line.indexOf('id:') == 0) {\n            this.lastEventId = line.replace(/id:?\\s*/, '')\n          } else if (line.indexOf('id') == 0) {\n            // this resets the id\n\n            this.lastEventId = null\n          }\n        }\n\n        if (datas.length && this.readyState != this.CLOSED) {\n          // dispatch a new event\n          var event = new MessageEvent(\n            eventType,\n            datas.join('\\n'),\n            typeof window !== 'undefined' && typeof window.location !== 'undefined'\n              ? window.location.origin\n              : null,\n            this.lastEventId\n          )\n          this.dispatchEvent(eventType, event)\n        }\n      }\n\n      this.cache = events[events.length - 1]\n    },\n\n    dispatchEvent: function (type, event) {\n      var handlers = this['_' + type + 'Handlers']\n\n      if (handlers) {\n        for (var i = 0; i < handlers.length; i++) {\n          handlers[i].call(this, event)\n        }\n      }\n\n      if (this['on' + type]) {\n        this['on' + type].call(this, event)\n      }\n    },\n\n    addEventListener: function (type, handler) {\n      if (!this['_' + type + 'Handlers']) {\n        this['_' + type + 'Handlers'] = []\n      }\n\n      this['_' + type + 'Handlers'].push(handler)\n    },\n\n    removeEventListener: function (type, handler) {\n      var handlers = this['_' + type + 'Handlers']\n      if (!handlers) {\n        return\n      }\n      for (var i = handlers.length - 1; i >= 0; --i) {\n        if (handlers[i] === handler) {\n          handlers.splice(i, 1)\n          break\n        }\n      }\n    },\n\n    _pollTimer: null,\n\n    _noactivityTimer: null,\n\n    _xhr: null,\n\n    lastEventId: null,\n\n    cache: '',\n\n    cursor: 0,\n\n    onerror: null,\n\n    onmessage: null,\n\n    onopen: null,\n\n    readyState: 0,\n\n    // ===================================================================\n    // helpers functions\n    // those are attached to prototype to ease reuse and testing...\n\n    urlWithParams: function (baseURL, params) {\n      var encodedArgs = []\n\n      if (params) {\n        var key, urlarg\n        var urlize = encodeURIComponent\n\n        for (key in params) {\n          if (params.hasOwnProperty(key)) {\n            urlarg = urlize(key) + '=' + urlize(params[key])\n            encodedArgs.push(urlarg)\n          }\n        }\n      }\n\n      if (encodedArgs.length > 0) {\n        if (baseURL.indexOf('?') == -1) return baseURL + '?' + encodedArgs.join('&')\n        return baseURL + '&' + encodedArgs.join('&')\n      }\n      return baseURL\n    },\n\n    lastMessageIndex: function (text) {\n      var ln2 = text.lastIndexOf('\\n\\n')\n      var lr2 = text.lastIndexOf('\\r\\r')\n      var lrln2 = text.lastIndexOf('\\r\\n\\r\\n')\n\n      if (lrln2 > Math.max(ln2, lr2)) {\n        return [lrln2, lrln2 + 4]\n      }\n      return [Math.max(ln2, lr2), Math.max(ln2, lr2) + 2]\n    },\n\n    trimWhiteSpace: function (str) {\n      // to remove whitespaces left and right of string\n\n      var reTrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g\n      return str.replace(reTrim, '')\n    },\n\n    normalizeToLF: function (str) {\n      // replace \\r and \\r\\n with \\n\n      return str.replace(/\\r\\n|\\r/g, '\\n')\n    },\n  }\n\n  if (isOldIE()) {\n    EventSource.isPolyfill = 'IE_8-9'\n\n    // patch EventSource defaultOptions\n    var defaults = EventSource.prototype.defaultOptions\n    defaults.xhrHeaders = null // no headers will be sent\n    defaults.getArgs.evs_preamble = 2048 + 8\n\n    // EventSource will send request using Internet Explorer XDomainRequest\n    EventSource.prototype.XHR = function (evs) {\n      /* global XDomainRequest */\n      var request = new XDomainRequest()\n      this._request = request\n\n      // set handlers\n      request.onprogress = function () {\n        request._ready = true\n        evs._onxhrdata()\n      }\n\n      request.onload = function () {\n        this._loaded = true\n        evs._onxhrdata()\n      }\n\n      request.onerror = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest error',\n        })\n      }\n\n      request.ontimeout = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest timed out',\n        })\n      }\n\n      // XDomainRequest does not allow setting custom headers\n      // If EventSource has enabled the use of GET arguments\n      // we add parameters to URL so that server can adapt the stream...\n      var reqGetArgs = {}\n      if (evs.getArgs) {\n        // copy evs.getArgs in reqGetArgs\n        var defaultArgs = evs.getArgs\n        for (var key in defaultArgs) {\n          if (defaultArgs.hasOwnProperty(key)) {\n            reqGetArgs[key] = defaultArgs[key]\n          }\n        }\n        if (evs.lastEventId) {\n          reqGetArgs.evs_last_event_id = evs.lastEventId\n        }\n      }\n      // send the request\n\n      request.open('GET', evs.urlWithParams(evs.URL, reqGetArgs))\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: true,\n\n      _request: null,\n\n      _ready: false, // true when progress events are dispatched\n\n      _loaded: false, // true when request has been loaded\n\n      _failed: false, // true if when request is in error\n\n      isReady: function () {\n        return this._request._ready\n      },\n\n      isDone: function () {\n        return this._request._loaded\n      },\n\n      hasError: function () {\n        return this._request._failed\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  } else {\n    EventSource.isPolyfill = 'XHR'\n\n    // EventSource will send request using XMLHttpRequest\n    EventSource.prototype.XHR = function (evs) {\n      var request = new XMLHttpRequest()\n      this._request = request\n      evs._xhr = this\n\n      // set handlers\n      request.onreadystatechange = function () {\n        if (request.readyState > 1 && evs.readyState != evs.CLOSED) {\n          if (request.status == 200 || (request.status >= 300 && request.status < 400)) {\n            evs._onxhrdata()\n          } else {\n            request._failed = true\n            evs.readyState = evs.CLOSED\n            evs.dispatchEvent('error', {\n              type: 'error',\n              data: 'The server responded with ' + request.status,\n            })\n            evs.close()\n          }\n        }\n      }\n\n      request.onprogress = function () {\n        // intentional noop\n      }\n\n      request.open('GET', evs.urlWithParams(evs.URL, evs.getArgs), true)\n\n      var headers = evs.xhrHeaders // maybe null\n      for (var header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          request.setRequestHeader(header, headers[header])\n        }\n      }\n      if (evs.lastEventId) {\n        request.setRequestHeader('Last-Event-Id', evs.lastEventId)\n      }\n\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: false,\n\n      _request: null,\n\n      _failed: false, // true if we have had errors...\n\n      isReady: function () {\n        return this._request.readyState >= 2\n      },\n\n      isDone: function () {\n        return this._request.readyState == 4\n      },\n\n      hasError: function () {\n        return this._failed || this._request.status >= 400\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  }\n\n  function MessageEvent(type, data, origin, lastEventId) {\n    this.bubbles = false\n    this.cancelBubble = false\n    this.cancelable = false\n    this.data = data || null\n    this.origin = origin || ''\n    this.lastEventId = lastEventId || ''\n    this.type = type || 'message'\n  }\n\n  function isOldIE() {\n    //return true if we are in IE8 or IE9\n    return Boolean(\n      typeof window !== 'undefined' &&\n        window.XDomainRequest &&\n        window.XMLHttpRequest &&\n        new XMLHttpRequest().responseType === undefined\n    )\n  }\n\n  return EventSource\n})\n","module.exports = require('./lib/internals')\n","const objectAssign = require('object-assign')\nconst buildMarksTree = require('./buildMarksTree')\nconst nestLists = require('./nestLists')\nconst generateKeys = require('./generateKeys')\nconst mergeSerializers = require('./mergeSerializers')\n\n// Properties to extract from props and pass to serializers as options\nconst optionProps = ['projectId', 'dataset', 'imageOptions', 'ignoreUnknownTypes']\nconst isDefined = val => typeof val !== 'undefined'\nconst defaults = {imageOptions: {}, ignoreUnknownTypes: true}\n\nfunction blocksToNodes(h, properties, defaultSerializers, serializeSpan) {\n  const props = objectAssign({}, defaults, properties)\n  const rawBlocks = Array.isArray(props.blocks) ? props.blocks : [props.blocks]\n  const keyedBlocks = generateKeys(rawBlocks)\n  const blocks = nestLists(keyedBlocks, props.listNestMode)\n  const serializers = mergeSerializers(defaultSerializers, props.serializers || {})\n\n  const options = optionProps.reduce((opts, key) => {\n    const value = props[key]\n    if (isDefined(value)) {\n      opts[key] = value\n    }\n    return opts\n  }, {})\n\n  function serializeNode(node, index, siblings, isInline) {\n    if (isList(node)) {\n      return serializeList(node)\n    }\n\n    if (isListItem(node)) {\n      return serializeListItem(node, findListItemIndex(node, siblings))\n    }\n\n    if (isSpan(node)) {\n      return serializeSpan(node, serializers, index, {serializeNode})\n    }\n\n    return serializeBlock(node, index, isInline)\n  }\n\n  function findListItemIndex(node, siblings) {\n    let index = 0\n    for (let i = 0; i < siblings.length; i++) {\n      if (siblings[i] === node) {\n        return index\n      }\n\n      if (!isListItem(siblings[i])) {\n        continue\n      }\n\n      index++\n    }\n\n    return index\n  }\n\n  function serializeBlock(block, index, isInline) {\n    const tree = buildMarksTree(block)\n    const children = tree.map((node, i, siblings) => serializeNode(node, i, siblings, true))\n    const blockProps = {\n      key: block._key || `block-${index}`,\n      node: block,\n      isInline,\n      serializers,\n      options\n    }\n\n    return h(serializers.block, blockProps, children)\n  }\n\n  function serializeListItem(block, index) {\n    const key = block._key\n    const tree = buildMarksTree(block)\n    const children = tree.map(serializeNode)\n    return h(serializers.listItem, {node: block, serializers, index, key, options}, children)\n  }\n\n  function serializeList(list) {\n    const type = list.listItem\n    const level = list.level\n    const key = list._key\n    const children = list.children.map(serializeNode)\n    return h(serializers.list, {key, level, type, options}, children)\n  }\n\n  // Default to false, so `undefined` will evaluate to the default here\n  const renderContainerOnSingleChild = Boolean(props.renderContainerOnSingleChild)\n\n  const nodes = blocks.map(serializeNode)\n  if (renderContainerOnSingleChild || nodes.length > 1) {\n    const containerProps = props.className ? {className: props.className} : {}\n    return h(serializers.container, containerProps, nodes)\n  }\n\n  if (nodes[0]) {\n    return nodes[0]\n  }\n\n  return typeof serializers.empty === 'function' ? h(serializers.empty) : serializers.empty\n}\n\nfunction isList(block) {\n  return block._type === 'list' && block.listItem\n}\n\nfunction isListItem(block) {\n  return block._type === 'block' && block.listItem\n}\n\nfunction isSpan(block) {\n  return typeof block === 'string' || block.marks || block._type === 'span'\n}\n\nmodule.exports = blocksToNodes\n","const defaultMarks = ['strong', 'em', 'code', 'underline', 'strike-through']\n\nconst buildMarksTree = block => {\n  const {children, markDefs} = block\n  if (!children || !children.length) {\n    return []\n  }\n\n  const sortedMarks = children.map(sortMarksByOccurences)\n  const rootNode = {_type: 'span', children: []}\n  let nodeStack = [rootNode]\n\n  children.forEach((span, i) => {\n    const marksNeeded = sortedMarks[i]\n    if (!marksNeeded) {\n      const lastNode = nodeStack[nodeStack.length - 1]\n      lastNode.children.push(span)\n      return\n    }\n\n    let pos = 1\n\n    // Start at position one. Root is always plain and should never be removed. (?)\n    if (nodeStack.length > 1) {\n      for (pos; pos < nodeStack.length; pos++) {\n        const mark = nodeStack[pos].markKey\n        const index = marksNeeded.indexOf(mark)\n        // eslint-disable-next-line max-depth\n        if (index === -1) {\n          break\n        }\n\n        marksNeeded.splice(index, 1)\n      }\n    }\n\n    // Keep from beginning to first miss\n    nodeStack = nodeStack.slice(0, pos)\n\n    // Add needed nodes\n    let currentNode = findLastParentNode(nodeStack)\n    marksNeeded.forEach(mark => {\n      const node = {\n        _type: 'span',\n        _key: span._key,\n        children: [],\n        mark: markDefs.find(def => def._key === mark) || mark,\n        markKey: mark\n      }\n\n      currentNode.children.push(node)\n      nodeStack.push(node)\n      currentNode = node\n    })\n\n    // Split at newlines to make individual line chunks, but keep newline\n    // characters as individual elements in the array. We use these characters\n    // in the span serializer to trigger hard-break rendering\n    if (isTextSpan(span)) {\n      const lines = span.text.split('\\n')\n      for (let line = lines.length; line-- > 1; ) {\n        lines.splice(line, 0, '\\n')\n      }\n\n      currentNode.children = currentNode.children.concat(lines)\n    } else {\n      currentNode.children = currentNode.children.concat(span)\n    }\n  })\n\n  return rootNode.children\n}\n\n// We want to sort all the marks of all the spans in the following order:\n// 1. Marks that are shared amongst the most adjacent siblings\n// 2. Non-default marks (links, custom metadata)\n// 3. Built-in, plain marks (bold, emphasis, code etc)\nfunction sortMarksByOccurences(span, i, spans) {\n  if (!span.marks || span.marks.length === 0) {\n    return span.marks || []\n  }\n\n  const markOccurences = span.marks.reduce((occurences, mark) => {\n    occurences[mark] = occurences[mark] ? occurences[mark] + 1 : 1\n\n    for (let siblingIndex = i + 1; siblingIndex < spans.length; siblingIndex++) {\n      const sibling = spans[siblingIndex]\n\n      if (sibling.marks && Array.isArray(sibling.marks) && sibling.marks.indexOf(mark) !== -1) {\n        occurences[mark]++\n      } else {\n        break\n      }\n    }\n\n    return occurences\n  }, {})\n\n  const sortByOccurence = sortMarks.bind(null, markOccurences)\n\n  // Slicing because sort() mutates the input\n  return span.marks.slice().sort(sortByOccurence)\n}\n\nfunction sortMarks(occurences, markA, markB) {\n  const aOccurences = occurences[markA] || 0\n  const bOccurences = occurences[markB] || 0\n\n  if (aOccurences !== bOccurences) {\n    return bOccurences - aOccurences\n  }\n\n  const aDefaultPos = defaultMarks.indexOf(markA)\n  const bDefaultPos = defaultMarks.indexOf(markB)\n\n  // Sort default marks last\n  if (aDefaultPos !== bDefaultPos) {\n    return aDefaultPos - bDefaultPos\n  }\n\n  // Sort other marks simply by key\n  if (markA < markB) {\n    return -1\n  } else if (markA > markB) {\n    return 1\n  }\n\n  return 0\n}\n\nfunction isTextSpan(node) {\n  return (\n    node._type === 'span' &&\n    typeof node.text === 'string' &&\n    (Array.isArray(node.marks) || typeof node.marks === 'undefined')\n  )\n}\n\nfunction findLastParentNode(nodes) {\n  for (let i = nodes.length - 1; i >= 0; i--) {\n    const node = nodes[i]\n    if (node._type === 'span' && node.children) {\n      return node\n    }\n  }\n\n  return undefined\n}\n\nmodule.exports = buildMarksTree\n","const objectAssign = require('object-assign')\n\nmodule.exports = blocks => {\n  return blocks.map(block => {\n    if (block._key) {\n      return block\n    }\n\n    return objectAssign({_key: getStaticKey(block)}, block)\n  })\n}\n\nfunction getStaticKey(item) {\n  return checksum(JSON.stringify(item))\n    .toString(36)\n    .replace(/[^A-Za-z0-9]/g, '')\n}\n\n/* eslint-disable no-bitwise */\nfunction checksum(str) {\n  let hash = 0\n  const strlen = str.length\n  if (strlen === 0) {\n    return hash\n  }\n\n  for (let i = 0; i < strlen; i++) {\n    hash = (hash << 5) - hash + str.charCodeAt(i)\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash\n}\n/* eslint-enable no-bitwise */\n","const generateHelpUrl = require('@sanity/generate-help-url')\nconst urlBuilder = require('@sanity/image-url')\nconst objectAssign = require('object-assign')\n\nconst enc = encodeURIComponent\nconst materializeError = `You must either:\n  - Pass \\`projectId\\` and \\`dataset\\` to the block renderer\n  - Materialize images to include the \\`url\\` field.\n\nFor more information, see ${generateHelpUrl('block-content-image-materializing')}`\n\nconst getQueryString = options => {\n  const query = options.imageOptions\n  const keys = Object.keys(query)\n  if (!keys.length) {\n    return ''\n  }\n\n  const params = keys.map(key => `${enc(key)}=${enc(query[key])}`)\n  return `?${params.join('&')}`\n}\n\nconst buildUrl = props => {\n  const {node, options} = props\n  const {projectId, dataset} = options\n  const asset = node.asset\n\n  if (!asset) {\n    throw new Error('Image does not have required `asset` property')\n  }\n\n  if (asset.url) {\n    return asset.url + getQueryString(options)\n  }\n\n  if (!projectId || !dataset) {\n    throw new Error(materializeError)\n  }\n\n  const ref = asset._ref\n  if (!ref) {\n    throw new Error('Invalid image reference in block, no `_ref` found on `asset`')\n  }\n\n  return urlBuilder(objectAssign({projectId, dataset}, options.imageOptions || {}))\n    .image(node)\n    .toString()\n}\n\nmodule.exports = buildUrl\n","const getSerializers = require('./serializers')\nconst blocksToNodes = require('./blocksToNodes')\nconst getImageUrl = require('./getImageUrl')\nconst mergeSerializers = require('./mergeSerializers')\n\nmodule.exports = {\n  blocksToNodes: (renderNode, props, defaultSerializers, serializeSpan) => {\n    if (defaultSerializers) {\n      return blocksToNodes(renderNode, props, defaultSerializers, serializeSpan)\n    }\n\n    // Backwards-compatibility\n    const serializers = getSerializers(renderNode)\n    return blocksToNodes(\n      renderNode,\n      props,\n      serializers.defaultSerializers,\n      serializers.serializeSpan\n    )\n  },\n  getSerializers,\n  getImageUrl,\n  mergeSerializers\n}\n","const objectAssign = require('object-assign')\nconst isDefined = val => typeof val !== 'undefined'\n\n// Recursively merge/replace default serializers with user-specified serializers\nmodule.exports = function mergeSerializers(defaultSerializers, userSerializers) {\n  return Object.keys(defaultSerializers).reduce((acc, key) => {\n    const type = typeof defaultSerializers[key]\n    if (type === 'function') {\n      acc[key] = isDefined(userSerializers[key]) ? userSerializers[key] : defaultSerializers[key]\n    } else if (type === 'object') {\n      acc[key] = objectAssign({}, defaultSerializers[key], userSerializers[key])\n    } else {\n      acc[key] =\n        typeof userSerializers[key] === 'undefined' ? defaultSerializers[key] : userSerializers[key]\n    }\n    return acc\n  }, {})\n}\n","const objectAssign = require('object-assign')\n\n/* eslint-disable max-depth, complexity */\nfunction nestLists(blocks, mode = 'html') {\n  const tree = []\n  let currentList\n\n  for (let i = 0; i < blocks.length; i++) {\n    const block = blocks[i]\n    if (!isListBlock(block)) {\n      tree.push(block)\n      currentList = null\n      continue\n    }\n\n    // Start of a new list?\n    if (!currentList) {\n      currentList = listFromBlock(block)\n      tree.push(currentList)\n      continue\n    }\n\n    // New list item within same list?\n    if (blockMatchesList(block, currentList)) {\n      currentList.children.push(block)\n      continue\n    }\n\n    // Different list props, are we going deeper?\n    if (block.level > currentList.level) {\n      const newList = listFromBlock(block)\n\n      if (mode === 'html') {\n        // Because HTML is kinda weird, nested lists needs to be nested within list items\n        // So while you would think that we could populate the parent list with a new sub-list,\n        // We actually have to target the last list element (child) of the parent.\n        // However, at this point we need to be very careful - simply pushing to the list of children\n        // will mutate the input, and we don't want to blindly clone the entire tree.\n\n        // Clone the last child while adding our new list as the last child of it\n        const lastListItem = lastChild(currentList)\n        const newLastChild = objectAssign({}, lastListItem, {\n          children: lastListItem.children.concat(newList)\n        })\n\n        // Swap the last child\n        currentList.children[currentList.children.length - 1] = newLastChild\n      } else {\n        currentList.children.push(newList)\n      }\n\n      // Set the newly created, deeper list as the current\n      currentList = newList\n      continue\n    }\n\n    // Different list props, are we going back up the tree?\n    if (block.level < currentList.level) {\n      // Current list has ended, and we need to hook up with a parent of the same level and type\n      const match = findListMatching(tree[tree.length - 1], block)\n      if (match) {\n        currentList = match\n        currentList.children.push(block)\n        continue\n      }\n\n      // Similar parent can't be found, assume new list\n      currentList = listFromBlock(block)\n      tree.push(currentList)\n      continue\n    }\n\n    // Different list props, different list style?\n    if (block.listItem !== currentList.listItem) {\n      const match = findListMatching(tree[tree.length - 1], {level: block.level})\n      if (match && match.listItem === block.listItem) {\n        currentList = match\n        currentList.children.push(block)\n        continue\n      } else {\n        currentList = listFromBlock(block)\n        tree.push(currentList)\n        continue\n      }\n    }\n\n    // eslint-disable-next-line no-console\n    console.warn('Unknown state encountered for block', block)\n    tree.push(block)\n  }\n\n  return tree\n}\n\nfunction isListBlock(block) {\n  return Boolean(block.listItem)\n}\n\nfunction blockMatchesList(block, list) {\n  return block.level === list.level && block.listItem === list.listItem\n}\n\nfunction listFromBlock(block) {\n  return {\n    _type: 'list',\n    _key: `${block._key}-parent`,\n    level: block.level,\n    listItem: block.listItem,\n    children: [block]\n  }\n}\n\nfunction lastChild(block) {\n  return block.children && block.children[block.children.length - 1]\n}\n\nfunction findListMatching(rootNode, matching) {\n  const filterOnType = typeof matching.listItem === 'string'\n  if (\n    rootNode._type === 'list' &&\n    rootNode.level === matching.level &&\n    (filterOnType && rootNode.listItem === matching.listItem)\n  ) {\n    return rootNode\n  }\n\n  const node = lastChild(rootNode)\n  if (!node) {\n    return false\n  }\n\n  return findListMatching(node, matching)\n}\n\nmodule.exports = nestLists\n","const objectAssign = require('object-assign')\nconst getImageUrl = require('./getImageUrl')\n\nmodule.exports = (h, serializerOpts) => {\n  const serializeOptions = serializerOpts || {useDashedStyles: false}\n\n  // Low-level block serializer\n  function BlockSerializer(props) {\n    const {node, serializers, options, isInline, children} = props\n    const blockType = node._type\n    const serializer = serializers.types[blockType]\n    if (!serializer) {\n      if (options.ignoreUnknownTypes) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Unknown block type \"${blockType}\", please specify a serializer for it in the \\`serializers.types\\` prop`\n        )\n        return h(serializers.unknownType, {node, options, isInline}, children)\n      }\n      throw new Error(\n        `Unknown block type \"${blockType}\", please specify a serializer for it in the \\`serializers.types\\` prop`\n      )\n    }\n\n    return h(serializer, {node, options, isInline}, children)\n  }\n\n  // Low-level span serializer\n  function SpanSerializer(props) {\n    const {mark, children} = props.node\n    const isPlain = typeof mark === 'string'\n    const markType = isPlain ? mark : mark._type\n    const serializer = props.serializers.marks[markType]\n    if (!serializer) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Unknown mark type \"${markType}\", please specify a serializer for it in the \\`serializers.marks\\` prop`\n      )\n      return h(props.serializers.unknownMark, null, children)\n    }\n\n    return h(serializer, props.node, children)\n  }\n\n  // Low-level list serializer\n  function ListSerializer(props) {\n    const tag = props.type === 'bullet' ? 'ul' : 'ol'\n    return h(tag, null, props.children)\n  }\n\n  // Low-level list item serializer\n  function ListItemSerializer(props) {\n    const children =\n      !props.node.style || props.node.style === 'normal'\n        ? // Don't wrap plain text in paragraphs inside of a list item\n          props.children\n        : // But wrap any other style in whatever the block serializer says to use\n          h(props.serializers.types.block, props, props.children)\n\n    return h('li', null, children)\n  }\n\n  // Unknown type default serializer\n  function DefaultUnknownTypeSerializer(props) {\n    return h(\n      'div',\n      {style: {display: 'none'}},\n      `Unknown block type \"${\n        props.node._type\n      }\", please specify a serializer for it in the \\`serializers.types\\` prop`\n    )\n  }\n\n  // Renderer of an actual block of type `block`. Confusing, we know.\n  function BlockTypeSerializer(props) {\n    const style = props.node.style || 'normal'\n\n    if (/^h\\d/.test(style)) {\n      return h(style, null, props.children)\n    }\n\n    return style === 'blockquote'\n      ? h('blockquote', null, props.children)\n      : h('p', null, props.children)\n  }\n\n  // Serializers for things that can be directly attributed to a tag without any props\n  // We use partial application to do this, passing the tag name as the first argument\n  function RawMarkSerializer(tag, props) {\n    return h(tag, null, props.children)\n  }\n\n  function UnderlineSerializer(props) {\n    const style = serializeOptions.useDashedStyles\n      ? {'text-decoration': 'underline'}\n      : {textDecoration: 'underline'}\n\n    return h('span', {style}, props.children)\n  }\n\n  function StrikeThroughSerializer(props) {\n    return h('del', null, props.children)\n  }\n\n  function LinkSerializer(props) {\n    return h('a', {href: props.mark.href}, props.children)\n  }\n\n  function ImageSerializer(props) {\n    if (!props.node.asset) {\n      return null\n    }\n\n    const img = h('img', {src: getImageUrl(props)})\n    return props.isInline ? img : h('figure', null, img)\n  }\n\n  // Serializer that recursively calls itself, producing a hyperscript tree of spans\n  function serializeSpan(span, serializers, index, options) {\n    if (span === '\\n' && serializers.hardBreak) {\n      return h(serializers.hardBreak, {key: `hb-${index}`})\n    }\n\n    if (typeof span === 'string') {\n      return serializers.text ? h(serializers.text, {key: `text-${index}`}, span) : span\n    }\n\n    let children\n    if (span.children) {\n      children = {\n        children: span.children.map((child, i) =>\n          options.serializeNode(child, i, span.children, true)\n        )\n      }\n    }\n\n    const serializedNode = objectAssign({}, span, children)\n\n    return h(serializers.span, {\n      key: span._key || `span-${index}`,\n      node: serializedNode,\n      serializers\n    })\n  }\n\n  const HardBreakSerializer = () => h('br')\n  const defaultMarkSerializers = {\n    strong: RawMarkSerializer.bind(null, 'strong'),\n    em: RawMarkSerializer.bind(null, 'em'),\n    code: RawMarkSerializer.bind(null, 'code'),\n    underline: UnderlineSerializer,\n    'strike-through': StrikeThroughSerializer,\n    link: LinkSerializer\n  }\n\n  const defaultSerializers = {\n    // Common overrides\n    types: {\n      block: BlockTypeSerializer,\n      image: ImageSerializer\n    },\n    marks: defaultMarkSerializers,\n\n    // Less common overrides\n    list: ListSerializer,\n    listItem: ListItemSerializer,\n\n    block: BlockSerializer,\n    span: SpanSerializer,\n    hardBreak: HardBreakSerializer,\n\n    unknownType: DefaultUnknownTypeSerializer,\n    unknownMark: 'span',\n\n    // Container element\n    container: 'div',\n\n    // Allow overriding text renderer, but leave undefined to just use plain strings by default\n    text: undefined,\n\n    // Empty nodes (React uses null, hyperscript with empty strings)\n    empty: ''\n  }\n\n  return {\n    defaultSerializers,\n    serializeSpan\n  }\n}\n","var baseUrl = 'https://docs.sanity.io/help/'\n\nmodule.exports = function generateHelpUrl(slug) {\n  return baseUrl + slug\n}\n","const example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg'\n\nexport default function parseAssetId(ref: string) {\n  const [, id, dimensionString, format] = ref.split('-')\n\n  if (!id || !dimensionString || !format) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  const [imgWidthStr, imgHeightStr] = dimensionString.split('x')\n\n  const width = +imgWidthStr\n  const height = +imgHeightStr\n\n  const isValidAssetId = isFinite(width) && isFinite(height)\n  if (!isValidAssetId) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  return {id, width, height, format}\n}\n","import {\n  SanityAsset,\n  SanityImageObject,\n  SanityImageSource,\n  SanityImageWithAssetStub,\n  SanityReference,\n} from './types'\n\nconst isRef = (src: SanityImageSource): src is SanityReference => {\n  const source = src as SanityReference\n  return source ? typeof source._ref === 'string' : false\n}\n\nconst isAsset = (src: SanityImageSource): src is SanityAsset => {\n  const source = src as SanityAsset\n  return source ? typeof source._id === 'string' : false\n}\n\nconst isAssetStub = (src: SanityImageSource): src is SanityImageWithAssetStub => {\n  const source = src as SanityImageWithAssetStub\n  return source && source.asset ? typeof source.asset.url === 'string' : false\n}\n\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nexport default function parseSource(source?: SanityImageSource) {\n  if (!source) {\n    return null\n  }\n\n  let image: SanityImageObject\n\n  if (typeof source === 'string' && isUrl(source)) {\n    // Someone passed an existing image url?\n    image = {\n      asset: {_ref: urlToId(source)},\n    }\n  } else if (typeof source === 'string') {\n    // Just an asset id\n    image = {\n      asset: {_ref: source},\n    }\n  } else if (isRef(source)) {\n    // We just got passed an asset directly\n    image = {\n      asset: source,\n    }\n  } else if (isAsset(source)) {\n    // If we were passed an image asset document\n    image = {\n      asset: {\n        _ref: source._id || '',\n      },\n    }\n  } else if (isAssetStub(source)) {\n    // If we were passed a partial asset (`url`, but no `_id`)\n    image = {\n      asset: {\n        _ref: urlToId(source.asset.url),\n      },\n    }\n  } else if (typeof source.asset === 'object') {\n    // Probably an actual image with materialized asset\n    image = source\n  } else {\n    // We got something that does not look like an image, or it is an image\n    // that currently isn't sporting an asset.\n    return null\n  }\n\n  const img = source as SanityImageObject\n  if (img.crop) {\n    image.crop = img.crop\n  }\n\n  if (img.hotspot) {\n    image.hotspot = img.hotspot\n  }\n\n  return applyDefaults(image)\n}\n\nfunction isUrl(url: string) {\n  return /^https?:\\/\\//.test(`${url}`)\n}\n\nfunction urlToId(url: string) {\n  const parts = url.split('/').slice(-1)\n  return `image-${parts[0]}`.replace(/\\.([a-z]+)$/, '-$1')\n}\n\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image: SanityImageObject) {\n  if (image.crop && image.hotspot) {\n    return image as Required<SanityImageObject>\n  }\n\n  // We need to pad in default values for crop or hotspot\n  const result = {...image}\n\n  if (!result.crop) {\n    result.crop = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n    }\n  }\n\n  if (!result.hotspot) {\n    result.hotspot = {\n      x: 0.5,\n      y: 0.5,\n      height: 1.0,\n      width: 1.0,\n    }\n  }\n\n  return result as Required<SanityImageObject>\n}\n","import parseAssetId from './parseAssetId'\nimport parseSource from './parseSource'\nimport {\n  CropSpec,\n  HotspotSpec,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAsset,\n  SanityAsset,\n  SanityImageFitResult,\n  SanityImageRect,\n  SanityReference,\n} from './types'\n\nexport const SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n  ['width', 'w'],\n  ['height', 'h'],\n  ['format', 'fm'],\n  ['download', 'dl'],\n  ['blur', 'blur'],\n  ['sharpen', 'sharp'],\n  ['invert', 'invert'],\n  ['orientation', 'or'],\n  ['minHeight', 'min-h'],\n  ['maxHeight', 'max-h'],\n  ['minWidth', 'min-w'],\n  ['maxWidth', 'max-w'],\n  ['quality', 'q'],\n  ['fit', 'fit'],\n  ['crop', 'crop'],\n  ['saturation', 'sat'],\n  ['auto', 'auto'],\n  ['dpr', 'dpr'],\n  ['pad', 'pad'],\n]\n\nexport default function urlForImage(options: ImageUrlBuilderOptions) {\n  let spec = {...(options || {})}\n  const source = spec.source\n  delete spec.source\n\n  const image = parseSource(source)\n  if (!image) {\n    return null\n  }\n\n  const id = (image.asset as SanityReference)._ref || (image.asset as SanityAsset)._id || ''\n  const asset = parseAssetId(id)\n\n  // Compute crop rect in terms of pixel coordinates in the raw source image\n  const cropLeft = Math.round(image.crop.left * asset.width)\n  const cropTop = Math.round(image.crop.top * asset.height)\n  const crop = {\n    left: cropLeft,\n    top: cropTop,\n    width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n    height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n  }\n\n  // Compute hot spot rect in terms of pixel coordinates\n  const hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2\n  const hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2\n  const hotSpotCenterX = image.hotspot.x * asset.width\n  const hotSpotCenterY = image.hotspot.y * asset.height\n  const hotspot = {\n    left: hotSpotCenterX - hotSpotHorizontalRadius,\n    top: hotSpotCenterY - hotSpotVerticalRadius,\n    right: hotSpotCenterX + hotSpotHorizontalRadius,\n    bottom: hotSpotCenterY + hotSpotVerticalRadius,\n  }\n\n  // If irrelevant, or if we are requested to: don't perform crop/fit based on\n  // the crop/hotspot.\n  if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n    spec = {...spec, ...fit({crop, hotspot}, spec)}\n  }\n\n  return specToImageUrl({...spec, asset})\n}\n\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec: ImageUrlBuilderOptionsWithAsset) {\n  const cdnUrl = spec.baseUrl || 'https://cdn.sanity.io'\n  const filename = `${spec.asset.id}-${spec.asset.width}x${spec.asset.height}.${spec.asset.format}`\n  const baseUrl = `${cdnUrl}/images/${spec.projectId}/${spec.dataset}/${filename}`\n\n  const params = []\n\n  if (spec.rect) {\n    // Only bother url with a crop if it actually crops anything\n    const {left, top, width, height} = spec.rect\n    const isEffectiveCrop =\n      left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width\n\n    if (isEffectiveCrop) {\n      params.push(`rect=${left},${top},${width},${height}`)\n    }\n  }\n\n  if (spec.bg) {\n    params.push(`bg=${spec.bg}`)\n  }\n\n  if (spec.focalPoint) {\n    params.push(`fp-x=${spec.focalPoint.x}`)\n    params.push(`fp-y=${spec.focalPoint.y}`)\n  }\n\n  const flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('')\n  if (flip) {\n    params.push(`flip=${flip}`)\n  }\n\n  // Map from spec name to url param name, and allow using the actual param name as an alternative\n  SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach((mapping) => {\n    const [specName, param] = mapping\n    if (typeof spec[specName] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[specName])}`)\n    } else if (typeof spec[param] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[param])}`)\n    }\n  })\n\n  if (params.length === 0) {\n    return baseUrl\n  }\n\n  return `${baseUrl}?${params.join('&')}`\n}\n\nfunction fit(\n  source: {crop: CropSpec; hotspot: HotspotSpec},\n  spec: ImageUrlBuilderOptions\n): SanityImageFitResult {\n  let cropRect: SanityImageRect\n\n  const imgWidth = spec.width\n  const imgHeight = spec.height\n\n  // If we are not constraining the aspect ratio, we'll just use the whole crop\n  if (!(imgWidth && imgHeight)) {\n    return {width: imgWidth, height: imgHeight, rect: source.crop}\n  }\n\n  const crop = source.crop\n  const hotspot = source.hotspot\n\n  // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n  const desiredAspectRatio = imgWidth / imgHeight\n  const cropAspectRatio = crop.width / crop.height\n\n  if (cropAspectRatio > desiredAspectRatio) {\n    // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n    const height = crop.height\n    const width = height * desiredAspectRatio\n    const top = crop.top\n\n    // Center output horizontally over hotspot\n    const hotspotXCenter = (hotspot.right - hotspot.left) / 2 + hotspot.left\n    let left = hotspotXCenter - width / 2\n\n    // Keep output within crop\n    if (left < crop.left) {\n      left = crop.left\n    } else if (left + width > crop.left + crop.width) {\n      left = crop.left + crop.width - width\n    }\n\n    cropRect = {\n      left: Math.round(left),\n      top: Math.round(top),\n      width: Math.round(width),\n      height: Math.round(height),\n    }\n  } else {\n    // The crop is taller than the desired ratio, we are cutting from top and bottom\n    const width = crop.width\n    const height = width / desiredAspectRatio\n    const left = crop.left\n\n    // Center output vertically over hotspot\n    const hotspotYCenter = (hotspot.bottom - hotspot.top) / 2 + hotspot.top\n    let top = hotspotYCenter - height / 2\n\n    // Keep output rect within crop\n    if (top < crop.top) {\n      top = crop.top\n    } else if (top + height > crop.top + crop.height) {\n      top = crop.top + crop.height - height\n    }\n\n    cropRect = {\n      left: Math.max(0, Math.floor(left)),\n      top: Math.max(0, Math.floor(top)),\n      width: Math.round(width),\n      height: Math.round(height),\n    }\n  }\n\n  return {\n    width: imgWidth,\n    height: imgHeight,\n    rect: cropRect,\n  }\n}\n\n// For backwards-compatibility\nexport {parseSource}\n","import {\n  AutoMode,\n  CropMode,\n  FitMode,\n  ImageFormat,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAliases,\n  Orientation,\n  SanityClientLike,\n  SanityImageSource,\n  SanityProjectDetails,\n} from './types'\nimport urlForImage, {SPEC_NAME_TO_URL_NAME_MAPPINGS} from './urlForImage'\n\nconst validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min']\nconst validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy']\nconst validAutoModes = ['format']\n\nfunction isSanityClientLike(client?: SanityClientLike): client is SanityClientLike {\n  return client ? typeof client.clientConfig === 'object' : false\n}\n\nfunction rewriteSpecName(key: string) {\n  const specs = SPEC_NAME_TO_URL_NAME_MAPPINGS\n  for (const entry of specs) {\n    const [specName, param] = entry\n    if (key === specName || key === param) {\n      return specName\n    }\n  }\n\n  return key\n}\n\nexport default function urlBuilder(options?: SanityClientLike | SanityProjectDetails) {\n  // Did we get a SanityClient?\n  const client = options as SanityClientLike\n  if (isSanityClientLike(client)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = client.clientConfig\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Or just accept the options as given\n  return new ImageUrlBuilder(null, options as ImageUrlBuilderOptions)\n}\n\nexport class ImageUrlBuilder {\n  public options: ImageUrlBuilderOptions\n\n  constructor(parent: ImageUrlBuilder | null, options: ImageUrlBuilderOptions) {\n    this.options = parent\n      ? {...(parent.options || {}), ...(options || {})} // Merge parent options\n      : {...(options || {})} // Copy options\n  }\n\n  withOptions(options: Partial<ImageUrlBuilderOptionsWithAliases>) {\n    const baseUrl = options.baseUrl || this.options.baseUrl\n\n    const newOptions: {[key: string]: any} = {baseUrl}\n    for (const key in options) {\n      if (options.hasOwnProperty(key)) {\n        const specKey = rewriteSpecName(key)\n        newOptions[specKey] = options[key]\n      }\n    }\n\n    return new ImageUrlBuilder(this, {baseUrl, ...newOptions})\n  }\n\n  // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n  // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n  // studio, the 'image'-document must be provided.\n  image(source: SanityImageSource) {\n    return this.withOptions({source})\n  }\n\n  // Specify the dataset\n  dataset(dataset: string) {\n    return this.withOptions({dataset})\n  }\n\n  // Specify the projectId\n  projectId(projectId: string) {\n    return this.withOptions({projectId})\n  }\n\n  // Specify background color\n  bg(bg: string) {\n    return this.withOptions({bg})\n  }\n\n  // Set DPR scaling factor\n  dpr(dpr: number) {\n    return this.withOptions({dpr})\n  }\n\n  // Specify the width of the image in pixels\n  width(width: number) {\n    return this.withOptions({width})\n  }\n\n  // Specify the height of the image in pixels\n  height(height: number) {\n    return this.withOptions({height})\n  }\n\n  // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n  focalPoint(x: number, y: number) {\n    return this.withOptions({focalPoint: {x, y}})\n  }\n\n  maxWidth(maxWidth: number) {\n    return this.withOptions({maxWidth})\n  }\n\n  minWidth(minWidth: number) {\n    return this.withOptions({minWidth})\n  }\n\n  maxHeight(maxHeight: number) {\n    return this.withOptions({maxHeight})\n  }\n\n  minHeight(minHeight: number) {\n    return this.withOptions({minHeight})\n  }\n\n  // Specify width and height in pixels\n  size(width: number, height: number) {\n    return this.withOptions({width, height})\n  }\n\n  // Specify blur between 0 and 100\n  blur(blur: number) {\n    return this.withOptions({blur})\n  }\n\n  sharpen(sharpen: number) {\n    return this.withOptions({sharpen})\n  }\n\n  // Specify the desired rectangle of the image\n  rect(left: number, top: number, width: number, height: number) {\n    return this.withOptions({rect: {left, top, width, height}})\n  }\n\n  // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n  format(format: ImageFormat) {\n    return this.withOptions({format})\n  }\n\n  invert(invert: boolean) {\n    return this.withOptions({invert})\n  }\n\n  // Rotation in degrees 0, 90, 180, 270\n  orientation(orientation: Orientation) {\n    return this.withOptions({orientation})\n  }\n\n  // Compression quality 0-100\n  quality(quality: number) {\n    return this.withOptions({quality})\n  }\n\n  // Make it a download link. Parameter is default filename.\n  forceDownload(download: boolean | string) {\n    return this.withOptions({download})\n  }\n\n  // Flip image horizontally\n  flipHorizontal() {\n    return this.withOptions({flipHorizontal: true})\n  }\n\n  // Flip image vertically\n  flipVertical() {\n    return this.withOptions({flipVertical: true})\n  }\n\n  // Ignore crop/hotspot from image record, even when present\n  ignoreImageParams() {\n    return this.withOptions({ignoreImageParams: true})\n  }\n\n  fit(value: FitMode) {\n    if (validFits.indexOf(value) === -1) {\n      throw new Error(`Invalid fit mode \"${value}\"`)\n    }\n\n    return this.withOptions({fit: value})\n  }\n\n  crop(value: CropMode) {\n    if (validCrops.indexOf(value) === -1) {\n      throw new Error(`Invalid crop mode \"${value}\"`)\n    }\n\n    return this.withOptions({crop: value})\n  }\n\n  // Saturation\n  saturation(saturation: number) {\n    return this.withOptions({saturation})\n  }\n\n  auto(value: AutoMode) {\n    if (validAutoModes.indexOf(value) === -1) {\n      throw new Error(`Invalid auto mode \"${value}\"`)\n    }\n\n    return this.withOptions({auto: value})\n  }\n\n  // Specify the number of pixels to pad the image\n  pad(pad: number) {\n    return this.withOptions({pad})\n  }\n\n  // Gets the url based on the submitted parameters\n  url() {\n    return urlForImage(this.options)\n  }\n\n  // Alias for url()\n  toString() {\n    return this.url()\n  }\n}\n","const React = require('react')\nconst PropTypes = require('prop-types')\nconst internals = require('@sanity/block-content-to-hyperscript/internals')\nconst {serializers, serializeSpan, renderProps} = require('./targets/dom')\n\nconst {getImageUrl, blocksToNodes, mergeSerializers} = internals\nconst renderNode = React.createElement\n\nconst SanityBlockContent = (props) => {\n  const customSerializers = mergeSerializers(\n    SanityBlockContent.defaultSerializers,\n    props.serializers\n  )\n\n  const blockProps = Object.assign({}, renderProps, props, {\n    serializers: customSerializers,\n    blocks: props.blocks || [],\n  })\n\n  return blocksToNodes(renderNode, blockProps, serializers, serializeSpan)\n}\n\n// Expose default serializers to the user\nSanityBlockContent.defaultSerializers = serializers\n\n// Expose logic for building image URLs from an image reference/node\nSanityBlockContent.getImageUrl = getImageUrl\n\nSanityBlockContent.propTypes = {\n  className: PropTypes.string,\n  renderContainerOnSingleChild: PropTypes.bool,\n  ignoreUnknownTypes: PropTypes.bool,\n\n  // When rendering images, we need project id and dataset, unless images are materialized\n  projectId: PropTypes.string,\n  dataset: PropTypes.string,\n  imageOptions: PropTypes.object,\n\n  serializers: PropTypes.shape({\n    // Common overrides\n    types: PropTypes.object,\n    marks: PropTypes.object,\n\n    // Less common overrides\n    list: PropTypes.func,\n    listItem: PropTypes.func,\n\n    // Low-level serializers\n    block: PropTypes.func,\n    span: PropTypes.func,\n  }),\n\n  blocks: PropTypes.oneOfType([\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        _type: PropTypes.string.isRequired,\n      })\n    ),\n    PropTypes.shape({\n      _type: PropTypes.string.isRequired,\n    }),\n  ]).isRequired,\n}\n\nSanityBlockContent.defaultProps = {\n  ignoreUnknownTypes: true,\n  renderContainerOnSingleChild: false,\n  serializers: {},\n  imageOptions: {},\n}\n\nmodule.exports = SanityBlockContent\n","const React = require('react')\nconst {getSerializers} = require('@sanity/block-content-to-hyperscript/internals')\n\nconst renderNode = React.createElement\nconst {defaultSerializers, serializeSpan} = getSerializers(renderNode)\n\nmodule.exports = {\n  serializeSpan,\n  serializers: defaultSerializers,\n  renderProps: {nestMarks: true},\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    map = _require.map,\n    filter = _require.filter;\n\nvar queryString = require('../http/queryString');\n\nvar validators = require('../validators');\n\nfunction AssetsClient(client) {\n  this.client = client;\n}\n\nfunction optionsFromFile(opts, file) {\n  if (typeof window === 'undefined' || !(file instanceof window.File)) {\n    return opts;\n  }\n\n  return assign({\n    filename: opts.preserveFilename === false ? undefined : file.name,\n    contentType: file.type\n  }, opts);\n}\n\nassign(AssetsClient.prototype, {\n  /**\n   * Upload an asset\n   *\n   * @param  {String} assetType `image` or `file`\n   * @param  {File|Blob|Buffer|ReadableStream} body File to upload\n   * @param  {Object}  opts Options for the upload\n   * @param  {Boolean} opts.preserveFilename Whether or not to preserve the original filename (default: true)\n   * @param  {String}  opts.filename Filename for this file (optional)\n   * @param  {Number}  opts.timeout  Milliseconds to wait before timing the request out (default: 0)\n   * @param  {String}  opts.contentType Mime type of the file\n   * @param  {Array}   opts.extract Array of metadata parts to extract from image.\n   *                                 Possible values: `location`, `exif`, `image`, `palette`\n   * @param  {String}  opts.label Label\n   * @param  {String}  opts.title Title\n   * @param  {String}  opts.description Description\n   * @param  {String}  opts.creditLine The credit to person(s) and/or organization(s) required by the supplier of the image to be used when published\n   * @param  {Object}  opts.source Source data (when the asset is from an external service)\n   * @param  {String}  opts.source.id The (u)id of the asset within the source, i.e. 'i-f323r1E'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.name The name of the source, i.e. 'unsplash'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.url A url to where to find the asset, or get more info about it in the source\n   *                                  Optional\n   * @return {Promise} Resolves with the created asset document\n   */\n  upload: function upload(assetType, body) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    validators.validateAssetType(assetType); // If an empty array is given, explicitly set `none` to override API defaults\n\n    var meta = opts.extract || undefined;\n\n    if (meta && !meta.length) {\n      meta = ['none'];\n    }\n\n    var dataset = validators.hasDataset(this.client.clientConfig);\n    var assetEndpoint = assetType === 'image' ? 'images' : 'files';\n    var options = optionsFromFile(opts, body);\n    var tag = options.tag,\n        label = options.label,\n        title = options.title,\n        description = options.description,\n        creditLine = options.creditLine,\n        filename = options.filename,\n        source = options.source;\n    var query = {\n      label: label,\n      title: title,\n      description: description,\n      filename: filename,\n      meta: meta,\n      creditLine: creditLine\n    };\n\n    if (source) {\n      query.sourceId = source.id;\n      query.sourceName = source.name;\n      query.sourceUrl = source.url;\n    }\n\n    var observable = this.client._requestObservable({\n      tag: tag,\n      method: 'POST',\n      timeout: options.timeout || 0,\n      uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n      headers: options.contentType ? {\n        'Content-Type': options.contentType\n      } : {},\n      query: query,\n      body: body\n    });\n\n    return this.client.isPromiseAPI() ? observable.pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body.document;\n    })).toPromise() : observable;\n  },\n  delete: function _delete(type, id) {\n    // eslint-disable-next-line no-console\n    console.warn('client.assets.delete() is deprecated, please use client.delete(<document-id>)');\n    var docId = id || '';\n\n    if (!/^(image|file)-/.test(docId)) {\n      docId = \"\".concat(type, \"-\").concat(docId);\n    } else if (type._id) {\n      // We could be passing an entire asset document instead of an ID\n      docId = type._id;\n    }\n\n    validators.hasDataset(this.client.clientConfig);\n    return this.client.delete(docId);\n  },\n  getImageUrl: function getImageUrl(ref, query) {\n    var id = ref._ref || ref;\n\n    if (typeof id !== 'string') {\n      throw new Error('getImageUrl() needs either an object with a _ref, or a string with an asset document ID');\n    }\n\n    if (!/^image-[A-Za-z0-9_]+-\\d+x\\d+-[a-z]{1,5}$/.test(id)) {\n      throw new Error(\"Unsupported asset ID \\\"\".concat(id, \"\\\". URL generation only works for auto-generated IDs.\"));\n    }\n\n    var _id$split = id.split('-'),\n        _id$split2 = _slicedToArray(_id$split, 4),\n        assetId = _id$split2[1],\n        size = _id$split2[2],\n        format = _id$split2[3];\n\n    validators.hasDataset(this.client.clientConfig);\n    var _this$client$clientCo = this.client.clientConfig,\n        projectId = _this$client$clientCo.projectId,\n        dataset = _this$client$clientCo.dataset;\n    var qs = query ? queryString(query) : '';\n    return \"https://cdn.sanity.io/images/\".concat(projectId, \"/\").concat(dataset, \"/\").concat(assetId, \"-\").concat(size, \".\").concat(format).concat(qs);\n  }\n});\nmodule.exports = AssetsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction AuthClient(client) {\n  this.client = client;\n}\n\nassign(AuthClient.prototype, {\n  getLoginProviders: function getLoginProviders() {\n    return this.client.request({\n      uri: '/auth/providers'\n    });\n  },\n  logout: function logout() {\n    return this.client.request({\n      uri: '/auth/logout',\n      method: 'POST'\n    });\n  }\n});\nmodule.exports = AuthClient;","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar assign = require('object-assign');\n\nvar validate = require('./validators');\n\nvar warnings = require('./warnings');\n\nvar defaultCdnHost = 'apicdn.sanity.io';\nvar defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  apiVersion: '1',\n  useProjectHostname: true,\n  isPromiseAPI: true\n};\nvar LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0'];\n\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n};\n\nexports.defaultConfig = defaultConfig; // eslint-disable-next-line complexity\n\nexports.initConfig = function (config, prevConfig) {\n  var specifiedConfig = assign({}, prevConfig, config);\n\n  if (!specifiedConfig.apiVersion) {\n    warnings.printNoApiVersionSpecifiedWarning();\n  }\n\n  var newConfig = assign({}, defaultConfig, specifiedConfig);\n  var projectBased = newConfig.useProjectHostname;\n\n  if (typeof Promise === 'undefined') {\n    var helpUrl = generateHelpUrl('js-client-promise-polyfill');\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`');\n  }\n\n  var isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    warnings.printBrowserTokenWarning();\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    warnings.printCdnWarning();\n  }\n\n  if (projectBased) {\n    validate.projectId(newConfig.projectId);\n  }\n\n  if (newConfig.dataset) {\n    validate.dataset(newConfig.dataset);\n  }\n\n  if ('requestTagPrefix' in newConfig) {\n    // Allow setting and unsetting request tag prefix\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix ? validate.requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, '') : undefined;\n  }\n\n  newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, '');\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = Boolean(newConfig.useCdn) && !newConfig.withCredentials;\n  exports.validateApiVersion(newConfig.apiVersion);\n  var hostParts = newConfig.apiHost.split('://', 2);\n  var protocol = hostParts[0];\n  var host = hostParts[1];\n  var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n\n  if (newConfig.useProjectHostname) {\n    newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n  } else {\n    newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = newConfig.url;\n  }\n\n  return newConfig;\n};\n\nexports.validateApiVersion = function validateApiVersion(apiVersion) {\n  if (apiVersion === '1' || apiVersion === 'X') {\n    return;\n  }\n\n  var apiDate = new Date(apiVersion);\n  var apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n\n  if (!apiVersionValid) {\n    throw new Error('Invalid API version string, expected `1` or date in format `YYYY-MM-DD`');\n  }\n};","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    map = _require.map,\n    filter = _require.filter;\n\nvar validators = require('../validators');\n\nvar getSelection = require('../util/getSelection');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar Transaction = require('./transaction');\n\nvar Patch = require('./patch');\n\nvar listen = require('./listen');\n\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === 'undefined' ? defValue : param;\n  return param === false ? undefined : value;\n};\n\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return _objectSpread({\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync'\n  }, options.skipCrossDatasetReferenceValidation && {\n    skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n  });\n};\n\nvar isResponse = function isResponse(event) {\n  return event.type === 'response';\n};\n\nvar getBody = function getBody(event) {\n  return event.body;\n};\n\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, Object.create(null));\n};\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nvar getQuerySizeLimit = 11264;\nmodule.exports = {\n  listen: listen,\n  getDataUrl: function getDataUrl(operation, path) {\n    var config = this.clientConfig;\n    var catalog = validators.hasDataset(config);\n    var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return \"/data\".concat(uri).replace(/\\/($|\\?)/, '$1');\n  },\n  fetch: function fetch(query, params) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var mapResponse = options.filterResponse === false ? function (res) {\n      return res;\n    } : function (res) {\n      return res.result;\n    };\n\n    var observable = this._dataRequest('query', {\n      query: query,\n      params: params\n    }, options).pipe(map(mapResponse));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocument: function getDocument(id) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', id),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      return event.body.documents && event.body.documents[0];\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocuments: function getDocuments(ids) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', ids.join(',')),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      var indexed = indexBy(event.body.documents || [], function (doc) {\n        return doc._id;\n      });\n      return ids.map(function (id) {\n        return indexed[id] || null;\n      });\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  create: function create(doc, options) {\n    return this._create(doc, 'create', options);\n  },\n  createIfNotExists: function createIfNotExists(doc, options) {\n    validators.requireDocumentId('createIfNotExists', doc);\n    return this._create(doc, 'createIfNotExists', options);\n  },\n  createOrReplace: function createOrReplace(doc, options) {\n    validators.requireDocumentId('createOrReplace', doc);\n    return this._create(doc, 'createOrReplace', options);\n  },\n  patch: function patch(selector, operations) {\n    return new Patch(selector, operations, this);\n  },\n  delete: function _delete(selection, options) {\n    return this.dataRequest('mutate', {\n      mutations: [{\n        delete: getSelection(selection)\n      }]\n    }, options);\n  },\n  mutate: function mutate(mutations, options) {\n    var mut = mutations instanceof Patch || mutations instanceof Transaction ? mutations.serialize() : mutations;\n    var muts = Array.isArray(mut) ? mut : [mut];\n    var transactionId = options && options.transactionId;\n    return this.dataRequest('mutate', {\n      mutations: muts,\n      transactionId: transactionId\n    }, options);\n  },\n  transaction: function transaction(operations) {\n    return new Transaction(operations, this);\n  },\n  dataRequest: function dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var request = this._dataRequest(endpoint, body, options);\n\n    return this.isPromiseAPI() ? toPromise(request) : request;\n  },\n  _dataRequest: function _dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var isMutation = endpoint === 'mutate';\n    var isQuery = endpoint === 'query'; // Check if the query string is within a configured threshold,\n    // in which case we can use GET. Otherwise, use POST.\n\n    var strQuery = !isMutation && encodeQueryString(body);\n    var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    var stringQuery = useGet ? strQuery : '';\n    var returnFirst = options.returnFirst;\n    var timeout = options.timeout,\n        token = options.token,\n        tag = options.tag;\n    var uri = this.getDataUrl(endpoint, stringQuery);\n    var reqOptions = {\n      method: useGet ? 'GET' : 'POST',\n      uri: uri,\n      json: true,\n      body: useGet ? undefined : body,\n      query: isMutation && getMutationQuery(options),\n      timeout: timeout,\n      token: token,\n      tag: tag,\n      canUseCdn: isQuery\n    };\n    return this._requestObservable(reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n      if (!isMutation) {\n        return res;\n      } // Should we return documents?\n\n\n      var results = res.results || [];\n\n      if (options.returnDocuments) {\n        return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n          return mut.document;\n        });\n      } // Return a reduced subset\n\n\n      var key = returnFirst ? 'documentId' : 'documentIds';\n      var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n        return mut.id;\n      });\n      return _defineProperty({\n        transactionId: res.transactionId,\n        results: results\n      }, key, ids);\n    }));\n  },\n  _create: function _create(doc, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var mutation = _defineProperty({}, op, doc);\n\n    var opts = assign({\n      returnFirst: true,\n      returnDocuments: true\n    }, options);\n    return this.dataRequest('mutate', {\n      mutations: [mutation]\n    }, opts);\n  }\n};","\"use strict\";\n\nvar _excluded = [\"tag\"];\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar enc = encodeURIComponent;\n\nmodule.exports = function (_ref) {\n  var query = _ref.query,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options;\n\n  // We generally want tag at the start of the query string\n  var tag = options.tag,\n      opts = _objectWithoutProperties(options, _excluded);\n\n  var q = \"query=\".concat(enc(query));\n  var base = tag ? \"?tag=\".concat(enc(tag), \"&\").concat(q) : \"?\".concat(q);\n  var qString = Object.keys(params).reduce(function (qs, param) {\n    return \"\".concat(qs, \"&\").concat(enc(\"$\".concat(param)), \"=\").concat(enc(JSON.stringify(params[param])));\n  }, base);\n  return Object.keys(opts).reduce(function (qs, option) {\n    // Only include the option if it is truthy\n    return options[option] ? \"\".concat(qs, \"&\").concat(enc(option), \"=\").concat(enc(options[option])) : qs;\n  }, qString);\n};","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    Observable = _require.Observable;\n\nvar polyfilledEventSource = require('@sanity/eventsource');\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar pick = require('../util/pick');\n\nvar once = require('../util/once');\n\nvar defaults = require('../util/defaults');\n\nvar encodeQueryString = require('./encodeQueryString'); // Limit is 16K for a _request_, eg including headers. Have to account for an\n// unknown range of headers, but an average EventSource request from Chrome seems\n// to have around 700 bytes of cruft, so let us account for 1.2K to be \"safe\"\n\n\nvar MAX_URL_LENGTH = 16000 - 1200;\nvar tokenWarning = ['Using token with listeners is not supported in browsers. ', \"For more info, see \".concat(generateHelpUrl('js-client-listener-tokens-browser'), \".\")]; // eslint-disable-next-line no-console\n\nvar printTokenWarning = once(function () {\n  return console.warn(tokenWarning.join(' '));\n});\nvar isWindowEventSource = Boolean(typeof window !== 'undefined' && window.EventSource);\nvar EventSource = isWindowEventSource ? window.EventSource // Native browser EventSource\n: polyfilledEventSource; // Node.js, IE etc\n\nvar possibleOptions = ['includePreviousRevision', 'includeResult', 'visibility', 'effectFormat', 'tag'];\nvar defaultOptions = {\n  includeResult: true\n};\n\nmodule.exports = function listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _this$clientConfig = this.clientConfig,\n      url = _this$clientConfig.url,\n      token = _this$clientConfig.token,\n      withCredentials = _this$clientConfig.withCredentials,\n      requestTagPrefix = _this$clientConfig.requestTagPrefix;\n  var tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join('.') : opts.tag;\n\n  var options = _objectSpread(_objectSpread({}, defaults(opts, defaultOptions)), {}, {\n    tag: tag\n  });\n\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: listenOpts,\n    tag: tag\n  });\n  var uri = \"\".concat(url).concat(this.getDataUrl('listen', qs));\n\n  if (uri.length > MAX_URL_LENGTH) {\n    return new Observable(function (observer) {\n      return observer.error(new Error('Query too large for listener'));\n    });\n  }\n\n  var listenFor = options.events ? options.events : ['mutation'];\n  var shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1;\n\n  if (token && isWindowEventSource) {\n    printTokenWarning();\n  }\n\n  var esOptions = {};\n\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n\n  return new Observable(function (observer) {\n    var es = getEventSource();\n    var reconnectTimer;\n    var stopped = false;\n\n    function onError() {\n      if (stopped) {\n        return;\n      }\n\n      emitReconnect(); // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n\n      if (stopped) {\n        return;\n      } // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n\n\n      if (es.readyState === EventSource.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n\n    function onDisconnect(evt) {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n\n    function unsubscribe() {\n      es.removeEventListener('error', onError, false);\n      es.removeEventListener('channelError', onChannelError, false);\n      es.removeEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage, false);\n      });\n      es.close();\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: 'reconnect'\n        });\n      }\n    }\n\n    function getEventSource() {\n      var evs = new EventSource(uri, esOptions);\n      evs.addEventListener('error', onError, false);\n      evs.addEventListener('channelError', onChannelError, false);\n      evs.addEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return evs.addEventListener(type, onMessage, false);\n      });\n      return evs;\n    }\n\n    function open() {\n      es = getEventSource();\n    }\n\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n\n    return stop;\n  });\n};\n\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\n\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\n\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error';\n  }\n\n  if (err.error.description) {\n    return err.error.description;\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2);\n}","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar getSelection = require('../util/getSelection');\n\nvar validate = require('../validators');\n\nvar validateObject = validate.validateObject;\nvar validateInsert = validate.validateInsert;\n\nfunction Patch(selection) {\n  var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var client = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  this.selection = selection;\n  this.operations = assign({}, operations);\n  this.client = client;\n}\n\nassign(Patch.prototype, {\n  clone: function clone() {\n    return new Patch(this.selection, assign({}, this.operations), this.client);\n  },\n  set: function set(props) {\n    return this._assign('set', props);\n  },\n  diffMatchPatch: function diffMatchPatch(props) {\n    validateObject('diffMatchPatch', props);\n    return this._assign('diffMatchPatch', props);\n  },\n  unset: function unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given');\n    }\n\n    this.operations = assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  },\n  setIfMissing: function setIfMissing(props) {\n    return this._assign('setIfMissing', props);\n  },\n  replace: function replace(props) {\n    validateObject('replace', props);\n    return this._set('set', {\n      $: props\n    }); // eslint-disable-line id-length\n  },\n  inc: function inc(props) {\n    return this._assign('inc', props);\n  },\n  dec: function dec(props) {\n    return this._assign('dec', props);\n  },\n  insert: function insert(at, selector, items) {\n    var _this$_assign;\n\n    validateInsert(at, selector, items);\n    return this._assign('insert', (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n  },\n  append: function append(selector, items) {\n    return this.insert('after', \"\".concat(selector, \"[-1]\"), items);\n  },\n  prepend: function prepend(selector, items) {\n    return this.insert('before', \"\".concat(selector, \"[0]\"), items);\n  },\n  splice: function splice(selector, start, deleteCount, items) {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    var delAll = typeof deleteCount === 'undefined' || deleteCount === -1;\n    var startIndex = start < 0 ? start - 1 : start;\n    var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    var delRange = startIndex < 0 && delCount >= 0 ? '' : delCount;\n    var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert('replace', rangeSelector, items || []);\n  },\n  ifRevisionId: function ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  },\n  serialize: function serialize() {\n    return assign(getSelection(this.selection), this.operations);\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.client) {\n      throw new Error('No `client` passed to patch, either provide one or pass the ' + 'patch to a clients `mutate()` method');\n    }\n\n    var returnFirst = typeof this.selection === 'string';\n    var opts = assign({\n      returnFirst: returnFirst,\n      returnDocuments: true\n    }, options);\n    return this.client.mutate({\n      patch: this.serialize()\n    }, opts);\n  },\n  reset: function reset() {\n    this.operations = {};\n    return this;\n  },\n  _set: function _set(op, props) {\n    return this._assign(op, props, false);\n  },\n  _assign: function _assign(op, props) {\n    var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = assign({}, this.operations, _defineProperty({}, op, assign({}, merge && this.operations[op] || {}, props)));\n    return this;\n  }\n});\nmodule.exports = Patch;","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar validate = require('../validators');\n\nfunction DatasetsClient(client) {\n  this.request = client.request.bind(client);\n}\n\nassign(DatasetsClient.prototype, {\n  create: function create(name, options) {\n    return this._modify('PUT', name, options);\n  },\n  edit: function edit(name, options) {\n    return this._modify('PATCH', name, options);\n  },\n  delete: function _delete(name) {\n    return this._modify('DELETE', name);\n  },\n  list: function list() {\n    return this.request({\n      uri: '/datasets'\n    });\n  },\n  _modify: function _modify(method, name, body) {\n    validate.dataset(name);\n    return this.request({\n      method: method,\n      uri: \"/datasets/\".concat(name),\n      body: body\n    });\n  }\n});\nmodule.exports = DatasetsClient;","\"use strict\";\n\nmodule.exports = [];","\"use strict\";\n\nvar makeError = require('make-error');\n\nvar assign = require('object-assign');\n\nfunction ClientError(res) {\n  var props = extractErrorProps(res);\n  ClientError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction ServerError(res) {\n  var props = extractErrorProps(res);\n  ServerError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res)\n  }; // API/Boom style errors ({statusCode, error, message})\n\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  } // Query/database errors ({error: {description, other, arb, props}})\n\n\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  } // Other, more arbitrary errors\n\n\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\n\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : '';\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\n\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers['content-type'] || '').toLowerCase();\n  var isJson = contentType.indexOf('application/json') !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\n\nmakeError(ClientError);\nmakeError(ServerError);\nexports.ClientError = ClientError;\nexports.ServerError = ServerError;","\"use strict\";\n\nmodule.exports = function (params) {\n  var qs = [];\n\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      qs.push(\"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key])));\n    }\n  }\n\n  return qs.length > 0 ? \"?\".concat(qs.join('&')) : '';\n};","\"use strict\";\n\n/* eslint-disable no-empty-function, no-process-env */\nvar getIt = require('get-it');\n\nvar assign = require('object-assign');\n\nvar observable = require('get-it/lib/middleware/observable');\n\nvar jsonRequest = require('get-it/lib/middleware/jsonRequest');\n\nvar jsonResponse = require('get-it/lib/middleware/jsonResponse');\n\nvar progress = require('get-it/lib/middleware/progress');\n\nvar _require = require('../util/observable'),\n    Observable = _require.Observable;\n\nvar _require2 = require('./errors'),\n    ClientError = _require2.ClientError,\n    ServerError = _require2.ServerError;\n\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n\n    return res;\n  }\n};\nvar printWarnings = {\n  onResponse: function onResponse(res) {\n    var warn = res.headers['x-sanity-warning'];\n    var warnings = Array.isArray(warn) ? warn : [warn];\n    warnings.filter(Boolean).forEach(function (msg) {\n      return console.warn(msg);\n    }); // eslint-disable-line no-console\n\n    return res;\n  }\n}; // Environment-specific middleware.\n\nvar envSpecific = require('./nodeMiddleware');\n\nvar middleware = envSpecific.concat([printWarnings, jsonRequest(), jsonResponse(), progress(), httpError, observable({\n  implementation: Observable\n})]);\nvar request = getIt(middleware);\n\nfunction httpRequest(options) {\n  var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n  return requester(assign({\n    maxRedirects: 0\n  }, options));\n}\n\nhttpRequest.defaultRequester = request;\nhttpRequest.ClientError = ClientError;\nhttpRequest.ServerError = ServerError;\nmodule.exports = httpRequest;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar projectHeader = 'X-Sanity-Project-ID';\n\nmodule.exports = function (config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n\n  var withCredentials = Boolean(typeof overrides.withCredentials === 'undefined' ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout;\n  return assign({}, overrides, {\n    headers: assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials: withCredentials\n  });\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction ProjectsClient(client) {\n  this.client = client;\n}\n\nassign(ProjectsClient.prototype, {\n  list: function list() {\n    return this.client.request({\n      uri: '/projects'\n    });\n  },\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/projects/\".concat(id)\n    });\n  }\n});\nmodule.exports = ProjectsClient;","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('./util/observable'),\n    Observable = _require.Observable,\n    map = _require.map,\n    filter = _require.filter;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require2 = require('./config'),\n    defaultConfig = _require2.defaultConfig,\n    initConfig = _require2.initConfig;\n\nvar validate = require('./validators');\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  withConfig: function withConfig(newConfig) {\n    return this.clone().config(newConfig);\n  },\n  getUrl: function getUrl(uri) {\n    var useCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = useCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var _this = this;\n\n    var uri = options.url || options.uri; // If the `canUseCdn`-option is not set we detect it automatically based on the method + URL.\n    // Only the /data endpoint is currently available through API-CDN.\n\n    var canUseCdn = typeof options.canUseCdn === 'undefined' ? ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0 : options.canUseCdn;\n    var useCdn = this.clientConfig.useCdn && canUseCdn;\n    var tag = options.tag && this.clientConfig.requestTagPrefix ? [this.clientConfig.requestTagPrefix, options.tag].join('.') : options.tag || this.clientConfig.requestTagPrefix;\n\n    if (tag) {\n      options.query = _objectSpread({\n        tag: validate.requestTag(tag)\n      }, options.query);\n    }\n\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, useCdn)\n    }));\n    return new Observable(function (subscriber) {\n      return httpRequest(reqOptions, _this.clientConfig.requester).subscribe(subscriber);\n    });\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction UsersClient(client) {\n  this.client = client;\n}\n\nassign(UsersClient.prototype, {\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/users/\".concat(id)\n    });\n  }\n});\nmodule.exports = UsersClient;","\"use strict\";\n\nmodule.exports = function (obj, defaults) {\n  return Object.keys(defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};","\"use strict\";\n\nmodule.exports = function getSelection(sel) {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n\n  if (sel && sel.query) {\n    return 'params' in sel ? {\n      query: sel.query,\n      params: sel.params\n    } : {\n      query: sel.query\n    };\n  }\n\n  var selectionOpts = ['* Document ID (<docId>)', '* Array of document IDs', '* Object containing `query`'].join('\\n');\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n};","\"use strict\";\n\n//  Since `@sanity/client` doesn't offer ESM exports (yet) const {filter} = require('rxjs/operators') will cause the the whole of rxjs to be included in the bundle.\n//  The internal import paths here is a stop-gap measure and will become less of a problem when @sanity/client export tree-shakeable esm bundles\nvar _require = require('rxjs/internal/Observable'),\n    Observable = _require.Observable;\n\nvar _require2 = require('rxjs/internal/operators/filter'),\n    filter = _require2.filter;\n\nvar _require3 = require('rxjs/internal/operators/map'),\n    map = _require3.map;\n\nmodule.exports = {\n  Observable: Observable,\n  filter: filter,\n  map: map\n};","\"use strict\";\n\nmodule.exports = function (fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n};","\"use strict\";\n\nmodule.exports = function (obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === 'undefined') {\n      return selection;\n    }\n\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar VALID_ASSET_TYPES = ['image', 'file'];\nvar VALID_INSERT_LOCATIONS = ['before', 'after', 'replace'];\n\nexports.dataset = function (name) {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error('Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters');\n  }\n};\n\nexports.projectId = function (id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes');\n  }\n};\n\nexports.validateAssetType = function (type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(', ')));\n  }\n};\n\nexports.validateObject = function (op, val) {\n  if (val === null || _typeof(val) !== 'object' || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\n\nexports.requireDocumentId = function (op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n\n  exports.validateDocumentId(op, doc._id);\n};\n\nexports.validateDocumentId = function (op, id) {\n  if (typeof id !== 'string' || !/^[a-z0-9_.-]+$/i.test(id)) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\n\nexports.validateInsert = function (at, selector, items) {\n  var signature = 'insert(at, selector, items)';\n\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(', ');\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\n\nexports.hasDataset = function (config) {\n  if (!config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries');\n  }\n\n  return config.dataset || '';\n};\n\nexports.requestTag = function (tag) {\n  if (typeof tag !== 'string' || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n  }\n\n  return tag;\n};","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar once = require('./util/once');\n\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return (// eslint-disable-next-line no-console\n    once(function () {\n      var _console;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_console = console).warn.apply(_console, [message.join(' ')].concat(args));\n    })\n  );\n};\n\nexports.printCdnWarning = createWarningPrinter(['You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and', \"cheaper. Think about it! For more info, see \".concat(generateHelpUrl('js-client-cdn-configuration'), \".\"), 'To hide this warning, please set the `useCdn` option to either `true` or `false` when creating', 'the client.']);\nexports.printBrowserTokenWarning = createWarningPrinter(['You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.', \"See \".concat(generateHelpUrl('js-client-browser-token'), \" for more information and how to hide this warning.\")]);\nexports.printNoApiVersionSpecifiedWarning = createWarningPrinter(['Using the Sanity client without specifying an API version is deprecated.', \"See \".concat(generateHelpUrl('js-client-api-version'))]);","/* eslint-disable no-var */\nvar evs = require('@rexxars/eventsource-polyfill')\n\nmodule.exports =\n  typeof window === 'undefined' || !window.EventSource\n    ? // Use polyfill in non-browser/legacy environments\n      evs.EventSource\n    : // Use native EventSource when we can\n      window.EventSource\n","var baseUrl = 'https://docs.sanity.io/help/'\n\nmodule.exports = function generateHelpUrl(slug) {\n  return baseUrl + slug\n}\n","const example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg'\n\nexport default function parseAssetId(ref: string) {\n  const [, id, dimensionString, format] = ref.split('-')\n\n  if (!id || !dimensionString || !format) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  const [imgWidthStr, imgHeightStr] = dimensionString.split('x')\n\n  const width = +imgWidthStr\n  const height = +imgHeightStr\n\n  const isValidAssetId = isFinite(width) && isFinite(height)\n  if (!isValidAssetId) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  return {id, width, height, format}\n}\n","import {\n  SanityAsset,\n  SanityImageObject,\n  SanityImageSource,\n  SanityImageWithAssetStub,\n  SanityReference,\n} from './types'\n\nconst isRef = (src: SanityImageSource): src is SanityReference => {\n  const source = src as SanityReference\n  return source ? typeof source._ref === 'string' : false\n}\n\nconst isAsset = (src: SanityImageSource): src is SanityAsset => {\n  const source = src as SanityAsset\n  return source ? typeof source._id === 'string' : false\n}\n\nconst isAssetStub = (src: SanityImageSource): src is SanityImageWithAssetStub => {\n  const source = src as SanityImageWithAssetStub\n  return source && source.asset ? typeof source.asset.url === 'string' : false\n}\n\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nexport default function parseSource(source?: SanityImageSource) {\n  if (!source) {\n    return null\n  }\n\n  let image: SanityImageObject\n\n  if (typeof source === 'string' && isUrl(source)) {\n    // Someone passed an existing image url?\n    image = {\n      asset: {_ref: urlToId(source)},\n    }\n  } else if (typeof source === 'string') {\n    // Just an asset id\n    image = {\n      asset: {_ref: source},\n    }\n  } else if (isRef(source)) {\n    // We just got passed an asset directly\n    image = {\n      asset: source,\n    }\n  } else if (isAsset(source)) {\n    // If we were passed an image asset document\n    image = {\n      asset: {\n        _ref: source._id || '',\n      },\n    }\n  } else if (isAssetStub(source)) {\n    // If we were passed a partial asset (`url`, but no `_id`)\n    image = {\n      asset: {\n        _ref: urlToId(source.asset.url),\n      },\n    }\n  } else if (typeof source.asset === 'object') {\n    // Probably an actual image with materialized asset\n    image = source\n  } else {\n    // We got something that does not look like an image, or it is an image\n    // that currently isn't sporting an asset.\n    return null\n  }\n\n  const img = source as SanityImageObject\n  if (img.crop) {\n    image.crop = img.crop\n  }\n\n  if (img.hotspot) {\n    image.hotspot = img.hotspot\n  }\n\n  return applyDefaults(image)\n}\n\nfunction isUrl(url: string) {\n  return /^https?:\\/\\//.test(`${url}`)\n}\n\nfunction urlToId(url: string) {\n  const parts = url.split('/').slice(-1)\n  return `image-${parts[0]}`.replace(/\\.([a-z]+)$/, '-$1')\n}\n\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image: SanityImageObject) {\n  if (image.crop && image.hotspot) {\n    return image as Required<SanityImageObject>\n  }\n\n  // We need to pad in default values for crop or hotspot\n  const result = {...image}\n\n  if (!result.crop) {\n    result.crop = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n    }\n  }\n\n  if (!result.hotspot) {\n    result.hotspot = {\n      x: 0.5,\n      y: 0.5,\n      height: 1.0,\n      width: 1.0,\n    }\n  }\n\n  return result as Required<SanityImageObject>\n}\n","import parseAssetId from './parseAssetId'\nimport parseSource from './parseSource'\nimport {\n  CropSpec,\n  HotspotSpec,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAsset,\n  SanityAsset,\n  SanityImageFitResult,\n  SanityImageRect,\n  SanityReference,\n} from './types'\n\nexport const SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n  ['width', 'w'],\n  ['height', 'h'],\n  ['format', 'fm'],\n  ['download', 'dl'],\n  ['blur', 'blur'],\n  ['sharpen', 'sharp'],\n  ['invert', 'invert'],\n  ['orientation', 'or'],\n  ['minHeight', 'min-h'],\n  ['maxHeight', 'max-h'],\n  ['minWidth', 'min-w'],\n  ['maxWidth', 'max-w'],\n  ['quality', 'q'],\n  ['fit', 'fit'],\n  ['crop', 'crop'],\n  ['saturation', 'sat'],\n  ['auto', 'auto'],\n  ['dpr', 'dpr'],\n  ['pad', 'pad'],\n]\n\nexport default function urlForImage(options: ImageUrlBuilderOptions): string {\n  let spec = {...(options || {})}\n  const source = spec.source\n  delete spec.source\n\n  const image = parseSource(source)\n  if (!image) {\n    throw new Error(`Unable to resolve image URL from source (${JSON.stringify(source)})`)\n  }\n\n  const id = (image.asset as SanityReference)._ref || (image.asset as SanityAsset)._id || ''\n  const asset = parseAssetId(id)\n\n  // Compute crop rect in terms of pixel coordinates in the raw source image\n  const cropLeft = Math.round(image.crop.left * asset.width)\n  const cropTop = Math.round(image.crop.top * asset.height)\n  const crop = {\n    left: cropLeft,\n    top: cropTop,\n    width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n    height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n  }\n\n  // Compute hot spot rect in terms of pixel coordinates\n  const hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2\n  const hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2\n  const hotSpotCenterX = image.hotspot.x * asset.width\n  const hotSpotCenterY = image.hotspot.y * asset.height\n  const hotspot = {\n    left: hotSpotCenterX - hotSpotHorizontalRadius,\n    top: hotSpotCenterY - hotSpotVerticalRadius,\n    right: hotSpotCenterX + hotSpotHorizontalRadius,\n    bottom: hotSpotCenterY + hotSpotVerticalRadius,\n  }\n\n  // If irrelevant, or if we are requested to: don't perform crop/fit based on\n  // the crop/hotspot.\n  if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n    spec = {...spec, ...fit({crop, hotspot}, spec)}\n  }\n\n  return specToImageUrl({...spec, asset})\n}\n\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec: ImageUrlBuilderOptionsWithAsset) {\n  const cdnUrl = spec.baseUrl || 'https://cdn.sanity.io'\n  const filename = `${spec.asset.id}-${spec.asset.width}x${spec.asset.height}.${spec.asset.format}`\n  const baseUrl = `${cdnUrl}/images/${spec.projectId}/${spec.dataset}/${filename}`\n\n  const params = []\n\n  if (spec.rect) {\n    // Only bother url with a crop if it actually crops anything\n    const {left, top, width, height} = spec.rect\n    const isEffectiveCrop =\n      left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width\n\n    if (isEffectiveCrop) {\n      params.push(`rect=${left},${top},${width},${height}`)\n    }\n  }\n\n  if (spec.bg) {\n    params.push(`bg=${spec.bg}`)\n  }\n\n  if (spec.focalPoint) {\n    params.push(`fp-x=${spec.focalPoint.x}`)\n    params.push(`fp-y=${spec.focalPoint.y}`)\n  }\n\n  const flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('')\n  if (flip) {\n    params.push(`flip=${flip}`)\n  }\n\n  // Map from spec name to url param name, and allow using the actual param name as an alternative\n  SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach((mapping) => {\n    const [specName, param] = mapping\n    if (typeof spec[specName] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[specName])}`)\n    } else if (typeof spec[param] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[param])}`)\n    }\n  })\n\n  if (params.length === 0) {\n    return baseUrl\n  }\n\n  return `${baseUrl}?${params.join('&')}`\n}\n\nfunction fit(\n  source: {crop: CropSpec; hotspot: HotspotSpec},\n  spec: ImageUrlBuilderOptions\n): SanityImageFitResult {\n  let cropRect: SanityImageRect\n\n  const imgWidth = spec.width\n  const imgHeight = spec.height\n\n  // If we are not constraining the aspect ratio, we'll just use the whole crop\n  if (!(imgWidth && imgHeight)) {\n    return {width: imgWidth, height: imgHeight, rect: source.crop}\n  }\n\n  const crop = source.crop\n  const hotspot = source.hotspot\n\n  // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n  const desiredAspectRatio = imgWidth / imgHeight\n  const cropAspectRatio = crop.width / crop.height\n\n  if (cropAspectRatio > desiredAspectRatio) {\n    // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n    const height = Math.round(crop.height)\n    const width = Math.round(height * desiredAspectRatio)\n    const top = Math.max(0, Math.round(crop.top))\n\n    // Center output horizontally over hotspot\n    const hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left)\n    let left = Math.max(0, Math.round(hotspotXCenter - width / 2))\n\n    // Keep output within crop\n    if (left < crop.left) {\n      left = crop.left\n    } else if (left + width > crop.left + crop.width) {\n      left = crop.left + crop.width - width\n    }\n\n    cropRect = {left, top, width, height}\n  } else {\n    // The crop is taller than the desired ratio, we are cutting from top and bottom\n    const width = crop.width\n    const height = Math.round(width / desiredAspectRatio)\n    const left = Math.max(0, Math.round(crop.left))\n\n    // Center output vertically over hotspot\n    const hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top)\n    let top = Math.max(0, Math.round(hotspotYCenter - height / 2))\n\n    // Keep output rect within crop\n    if (top < crop.top) {\n      top = crop.top\n    } else if (top + height > crop.top + crop.height) {\n      top = crop.top + crop.height - height\n    }\n\n    cropRect = {left, top, width, height}\n  }\n\n  return {\n    width: imgWidth,\n    height: imgHeight,\n    rect: cropRect,\n  }\n}\n\n// For backwards-compatibility\nexport {parseSource}\n","import {\n  AutoMode,\n  CropMode,\n  FitMode,\n  ImageFormat,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAliases,\n  Orientation,\n  SanityClientLike,\n  SanityImageSource,\n  SanityProjectDetails,\n} from './types'\nimport urlForImage, {SPEC_NAME_TO_URL_NAME_MAPPINGS} from './urlForImage'\n\nconst validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min']\nconst validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy']\nconst validAutoModes = ['format']\n\nfunction isSanityClientLike(client?: SanityClientLike): client is SanityClientLike {\n  return client ? typeof client.clientConfig === 'object' : false\n}\n\nfunction rewriteSpecName(key: string) {\n  const specs = SPEC_NAME_TO_URL_NAME_MAPPINGS\n  for (const entry of specs) {\n    const [specName, param] = entry\n    if (key === specName || key === param) {\n      return specName\n    }\n  }\n\n  return key\n}\n\nexport default function urlBuilder(options?: SanityClientLike | SanityProjectDetails) {\n  // Did we get a SanityClient?\n  const client = options as SanityClientLike\n  if (isSanityClientLike(client)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = client.clientConfig\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Or just accept the options as given\n  return new ImageUrlBuilder(null, options as ImageUrlBuilderOptions)\n}\n\nexport class ImageUrlBuilder {\n  public options: ImageUrlBuilderOptions\n\n  constructor(parent: ImageUrlBuilder | null, options: ImageUrlBuilderOptions) {\n    this.options = parent\n      ? {...(parent.options || {}), ...(options || {})} // Merge parent options\n      : {...(options || {})} // Copy options\n  }\n\n  withOptions(options: Partial<ImageUrlBuilderOptionsWithAliases>) {\n    const baseUrl = options.baseUrl || this.options.baseUrl\n\n    const newOptions: {[key: string]: any} = {baseUrl}\n    for (const key in options) {\n      if (options.hasOwnProperty(key)) {\n        const specKey = rewriteSpecName(key)\n        newOptions[specKey] = options[key]\n      }\n    }\n\n    return new ImageUrlBuilder(this, {baseUrl, ...newOptions})\n  }\n\n  // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n  // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n  // studio, the 'image'-document must be provided.\n  image(source: SanityImageSource) {\n    return this.withOptions({source})\n  }\n\n  // Specify the dataset\n  dataset(dataset: string) {\n    return this.withOptions({dataset})\n  }\n\n  // Specify the projectId\n  projectId(projectId: string) {\n    return this.withOptions({projectId})\n  }\n\n  // Specify background color\n  bg(bg: string) {\n    return this.withOptions({bg})\n  }\n\n  // Set DPR scaling factor\n  dpr(dpr: number) {\n    // A DPR of 1 is the default - so only include it if we have a different value\n    return this.withOptions(dpr && dpr !== 1 ? {dpr} : {})\n  }\n\n  // Specify the width of the image in pixels\n  width(width: number) {\n    return this.withOptions({width})\n  }\n\n  // Specify the height of the image in pixels\n  height(height: number) {\n    return this.withOptions({height})\n  }\n\n  // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n  focalPoint(x: number, y: number) {\n    return this.withOptions({focalPoint: {x, y}})\n  }\n\n  maxWidth(maxWidth: number) {\n    return this.withOptions({maxWidth})\n  }\n\n  minWidth(minWidth: number) {\n    return this.withOptions({minWidth})\n  }\n\n  maxHeight(maxHeight: number) {\n    return this.withOptions({maxHeight})\n  }\n\n  minHeight(minHeight: number) {\n    return this.withOptions({minHeight})\n  }\n\n  // Specify width and height in pixels\n  size(width: number, height: number) {\n    return this.withOptions({width, height})\n  }\n\n  // Specify blur between 0 and 100\n  blur(blur: number) {\n    return this.withOptions({blur})\n  }\n\n  sharpen(sharpen: number) {\n    return this.withOptions({sharpen})\n  }\n\n  // Specify the desired rectangle of the image\n  rect(left: number, top: number, width: number, height: number) {\n    return this.withOptions({rect: {left, top, width, height}})\n  }\n\n  // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n  format(format: ImageFormat) {\n    return this.withOptions({format})\n  }\n\n  invert(invert: boolean) {\n    return this.withOptions({invert})\n  }\n\n  // Rotation in degrees 0, 90, 180, 270\n  orientation(orientation: Orientation) {\n    return this.withOptions({orientation})\n  }\n\n  // Compression quality 0-100\n  quality(quality: number) {\n    return this.withOptions({quality})\n  }\n\n  // Make it a download link. Parameter is default filename.\n  forceDownload(download: boolean | string) {\n    return this.withOptions({download})\n  }\n\n  // Flip image horizontally\n  flipHorizontal() {\n    return this.withOptions({flipHorizontal: true})\n  }\n\n  // Flip image vertically\n  flipVertical() {\n    return this.withOptions({flipVertical: true})\n  }\n\n  // Ignore crop/hotspot from image record, even when present\n  ignoreImageParams() {\n    return this.withOptions({ignoreImageParams: true})\n  }\n\n  fit(value: FitMode) {\n    if (validFits.indexOf(value) === -1) {\n      throw new Error(`Invalid fit mode \"${value}\"`)\n    }\n\n    return this.withOptions({fit: value})\n  }\n\n  crop(value: CropMode) {\n    if (validCrops.indexOf(value) === -1) {\n      throw new Error(`Invalid crop mode \"${value}\"`)\n    }\n\n    return this.withOptions({crop: value})\n  }\n\n  // Saturation\n  saturation(saturation: number) {\n    return this.withOptions({saturation})\n  }\n\n  auto(value: AutoMode) {\n    if (validAutoModes.indexOf(value) === -1) {\n      throw new Error(`Invalid auto mode \"${value}\"`)\n    }\n\n    return this.withOptions({auto: value})\n  }\n\n  // Specify the number of pixels to pad the image\n  pad(pad: number) {\n    return this.withOptions({pad})\n  }\n\n  // Gets the url based on the submitted parameters\n  url() {\n    return urlForImage(this.options)\n  }\n\n  // Alias for url()\n  toString() {\n    return this.url()\n  }\n}\n","module.exports = require('./lib-node')\n","const pubsub = require('nano-pubsub')\nconst middlewareReducer = require('./util/middlewareReducer')\nconst processOptions = require('./middleware/defaultOptionsProcessor')\nconst validateOptions = require('./middleware/defaultOptionsValidator')\nconst httpRequester = require('./request') // node-request in node, browser-request in browsers\n\nconst channelNames = ['request', 'response', 'progress', 'error', 'abort']\nconst middlehooks = [\n  'processOptions',\n  'validateOptions',\n  'interceptRequest',\n  'finalizeOptions',\n  'onRequest',\n  'onResponse',\n  'onError',\n  'onReturn',\n  'onHeaders'\n]\n\nmodule.exports = function createRequester(initMiddleware = [], httpRequest = httpRequester) {\n  const loadedMiddleware = []\n  const middleware = middlehooks.reduce(\n    (ware, name) => {\n      ware[name] = ware[name] || []\n      return ware\n    },\n    {\n      processOptions: [processOptions],\n      validateOptions: [validateOptions]\n    }\n  )\n\n  function request(opts) {\n    const channels = channelNames.reduce((target, name) => {\n      target[name] = pubsub()\n      return target\n    }, {})\n\n    // Prepare a middleware reducer that can be reused throughout the lifecycle\n    const applyMiddleware = middlewareReducer(middleware)\n\n    // Parse the passed options\n    const options = applyMiddleware('processOptions', opts)\n\n    // Validate the options\n    applyMiddleware('validateOptions', options)\n\n    // Build a context object we can pass to child handlers\n    const context = {options, channels, applyMiddleware}\n\n    // We need to hold a reference to the current, ongoing request,\n    // in order to allow cancellation. In the case of the retry middleware,\n    // a new request might be triggered\n    let ongoingRequest = null\n    const unsubscribe = channels.request.subscribe(ctx => {\n      // Let request adapters (node/browser) perform the actual request\n      ongoingRequest = httpRequest(ctx, (err, res) => onResponse(err, res, ctx))\n    })\n\n    // If we abort the request, prevent further requests from happening,\n    // and be sure to cancel any ongoing request (obviously)\n    channels.abort.subscribe(() => {\n      unsubscribe()\n      if (ongoingRequest) {\n        ongoingRequest.abort()\n      }\n    })\n\n    // See if any middleware wants to modify the return value - for instance\n    // the promise or observable middlewares\n    const returnValue = applyMiddleware('onReturn', channels, context)\n\n    // If return value has been modified by a middleware, we expect the middleware\n    // to publish on the 'request' channel. If it hasn't been modified, we want to\n    // trigger it right away\n    if (returnValue === channels) {\n      channels.request.publish(context)\n    }\n\n    return returnValue\n\n    function onResponse(reqErr, res, ctx) {\n      let error = reqErr\n      let response = res\n\n      // We're processing non-errors first, in case a middleware converts the\n      // response into an error (for instance, status >= 400 == HttpError)\n      if (!error) {\n        try {\n          response = applyMiddleware('onResponse', res, ctx)\n        } catch (err) {\n          response = null\n          error = err\n        }\n      }\n\n      // Apply error middleware - if middleware return the same (or a different) error,\n      // publish as an error event. If we *don't* return an error, assume it has been handled\n      error = error && applyMiddleware('onError', error, ctx)\n\n      // Figure out if we should publish on error/response channels\n      if (error) {\n        channels.error.publish(error)\n      } else if (response) {\n        channels.response.publish(response)\n      }\n    }\n  }\n\n  request.use = function use(newMiddleware) {\n    if (!newMiddleware) {\n      throw new Error('Tried to add middleware that resolved to falsey value')\n    }\n\n    if (typeof newMiddleware === 'function') {\n      throw new Error(\n        'Tried to add middleware that was a function. It probably expects you to pass options to it.'\n      )\n    }\n\n    if (newMiddleware.onReturn && middleware.onReturn.length > 0) {\n      throw new Error(\n        'Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event'\n      )\n    }\n\n    middlehooks.forEach(key => {\n      if (newMiddleware[key]) {\n        middleware[key].push(newMiddleware[key])\n      }\n    })\n\n    loadedMiddleware.push(newMiddleware)\n    return request\n  }\n\n  request.clone = function clone() {\n    return createRequester(loadedMiddleware)\n  }\n\n  initMiddleware.forEach(request.use)\n\n  return request\n}\n","const objectAssign = require('object-assign')\nconst urlParse = require('url-parse')\n\nconst isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative'\n\nconst has = Object.prototype.hasOwnProperty\nconst defaultOptions = {timeout: isReactNative ? 60000 : 120000}\n\nmodule.exports = opts => {\n  const options =\n    typeof opts === 'string'\n      ? objectAssign({url: opts}, defaultOptions)\n      : objectAssign({}, defaultOptions, opts)\n\n  // Parse URL into parts\n  const url = urlParse(\n    options.url,\n    {}, // Don't use current browser location\n    true // Parse query strings\n  )\n\n  // Normalize timeouts\n  options.timeout = normalizeTimeout(options.timeout)\n\n  // Shallow-merge (override) existing query params\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query))\n  }\n\n  // Implicit POST if we have not specified a method but have a body\n  options.method =\n    options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase()\n\n  // Stringify URL\n  options.url = url.toString(stringifyQueryString)\n\n  return options\n}\n\nfunction stringifyQueryString(obj) {\n  const pairs = []\n  for (const key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key])\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : ''\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(item => push(key, item))\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='))\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false\n  }\n\n  if (time.connect || time.socket) {\n    return time\n  }\n\n  const delay = Number(time)\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout)\n  }\n\n  return {connect: delay, socket: delay}\n}\n\nfunction removeUndefined(obj) {\n  const target = {}\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key]\n    }\n  }\n  return target\n}\n","const validUrl = /^https?:\\/\\//i\n\nmodule.exports = options => {\n  if (!validUrl.test(options.url)) {\n    throw new Error(`\"${options.url}\" is not a valid URL`)\n  }\n}\n","const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n","const objectAssign = require('object-assign')\n\nmodule.exports = opts => ({\n  onResponse: response => {\n    const contentType = response.headers['content-type'] || ''\n    const shouldDecode = (opts && opts.force) || contentType.indexOf('application/json') !== -1\n    if (!response.body || !contentType || !shouldDecode) {\n      return response\n    }\n\n    return objectAssign({}, response, {body: tryParse(response.body)})\n  },\n\n  processOptions: options =>\n    objectAssign({}, options, {\n      headers: objectAssign({Accept: 'application/json'}, options.headers)\n    })\n})\n\nfunction tryParse(body) {\n  try {\n    return JSON.parse(body)\n  } catch (err) {\n    err.message = `Failed to parsed response body as JSON: ${err.message}`\n    throw err\n  }\n}\n","const global = require('../util/global')\nconst objectAssign = require('object-assign')\n\nmodule.exports = (opts = {}) => {\n  const Observable = opts.implementation || global.Observable\n  if (!Observable) {\n    throw new Error(\n      '`Observable` is not available in global scope, and no implementation was passed'\n    )\n  }\n\n  return {\n    onReturn: (channels, context) =>\n      new Observable(observer => {\n        channels.error.subscribe(err => observer.error(err))\n        channels.progress.subscribe(event => observer.next(objectAssign({type: 'progress'}, event)))\n        channels.response.subscribe(response => {\n          observer.next(objectAssign({type: 'response'}, response))\n          observer.complete()\n        })\n\n        channels.request.publish(context)\n        return () => channels.abort.publish()\n      })\n  }\n}\n","module.exports = () => ({\n  onRequest: evt => {\n    if (evt.adapter !== 'xhr') {\n      return\n    }\n\n    const xhr = evt.request\n    const context = evt.context\n\n    if ('upload' in xhr && 'onprogress' in xhr.upload) {\n      xhr.upload.onprogress = handleProgress('upload')\n    }\n\n    if ('onprogress' in xhr) {\n      xhr.onprogress = handleProgress('download')\n    }\n\n    function handleProgress(stage) {\n      return event => {\n        const percent = event.lengthComputable ? (event.loaded / event.total) * 100 : -1\n        context.channels.progress.publish({\n          stage,\n          percent,\n          total: event.total,\n          loaded: event.loaded,\n          lengthComputable: event.lengthComputable\n        })\n      }\n    }\n  }\n})\n","module.exports = require('./node-progress')\n","/* eslint max-depth: [\"error\", 4] */\nconst sameOrigin = require('same-origin')\nconst parseHeaders = require('parse-headers')\nconst FetchXhr = require('./browser/fetchXhr')\n\nconst noop = function() {\n  /* intentional noop */\n}\n\nconst win = typeof window === 'undefined' ? undefined : window\nconst adapter = win ? 'xhr' : 'fetch'\n\nlet XmlHttpRequest = typeof XMLHttpRequest === 'function' ? XMLHttpRequest : noop\nconst hasXhr2 = 'withCredentials' in new XmlHttpRequest()\n// eslint-disable-next-line no-undef\nconst XDR = typeof XDomainRequest === 'undefined' ? undefined : XDomainRequest\nlet CrossDomainRequest = hasXhr2 ? XmlHttpRequest : XDR\n\n// Fallback to fetch-based XHR polyfill for non-browser environments like Workers\nif (!win) {\n  XmlHttpRequest = FetchXhr\n  CrossDomainRequest = FetchXhr\n}\n\nmodule.exports = (context, callback) => {\n  const opts = context.options\n  const options = context.applyMiddleware('finalizeOptions', opts)\n  const timers = {}\n\n  // Deep-checking window.location because of react native, where `location` doesn't exist\n  const cors = win && win.location && !sameOrigin(win.location.href, options.url)\n\n  // Allow middleware to inject a response, for instance in the case of caching or mocking\n  const injectedResponse = context.applyMiddleware('interceptRequest', undefined, {\n    adapter,\n    context\n  })\n\n  // If middleware injected a response, treat it as we normally would and return it\n  // Do note that the injected response has to be reduced to a cross-environment friendly response\n  if (injectedResponse) {\n    const cbTimer = setTimeout(callback, 0, null, injectedResponse)\n    const cancel = () => clearTimeout(cbTimer)\n    return {abort: cancel}\n  }\n\n  // We'll want to null out the request on success/failure\n  let xhr = cors ? new CrossDomainRequest() : new XmlHttpRequest()\n\n  const isXdr = win && win.XDomainRequest && xhr instanceof win.XDomainRequest\n  const headers = options.headers\n  const delays = options.timeout\n\n  // Request state\n  let aborted = false\n  let loaded = false\n  let timedOut = false\n\n  // Apply event handlers\n  xhr.onerror = onError\n  xhr.ontimeout = onError\n  xhr.onabort = () => {\n    stopTimers(true)\n    aborted = true\n  }\n\n  // IE9 must have onprogress be set to a unique function\n  xhr.onprogress = () => {\n    /* intentional noop */\n  }\n\n  const loadEvent = isXdr ? 'onload' : 'onreadystatechange'\n  xhr[loadEvent] = () => {\n    // Prevent request from timing out\n    resetTimers()\n\n    if (aborted || (xhr.readyState !== 4 && !isXdr)) {\n      return\n    }\n\n    // Will be handled by onError\n    if (xhr.status === 0) {\n      return\n    }\n\n    onLoad()\n  }\n\n  // @todo two last options to open() is username/password\n  xhr.open(\n    options.method,\n    options.url,\n    true // Always async\n  )\n\n  // Some options need to be applied after open\n  xhr.withCredentials = !!options.withCredentials\n\n  // Set headers\n  if (headers && xhr.setRequestHeader) {\n    for (const key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key])\n      }\n    }\n  } else if (headers && isXdr) {\n    throw new Error('Headers cannot be set on an XDomainRequest object')\n  }\n\n  if (options.rawBody) {\n    xhr.responseType = 'arraybuffer'\n  }\n\n  // Let middleware know we're about to do a request\n  context.applyMiddleware('onRequest', {options, adapter, request: xhr, context})\n\n  xhr.send(options.body || null)\n\n  // Figure out which timeouts to use (if any)\n  if (delays) {\n    timers.connect = setTimeout(() => timeoutRequest('ETIMEDOUT'), delays.connect)\n  }\n\n  return {abort}\n\n  function abort() {\n    aborted = true\n\n    if (xhr) {\n      xhr.abort()\n    }\n  }\n\n  function timeoutRequest(code) {\n    timedOut = true\n    xhr.abort()\n    const error = new Error(\n      code === 'ESOCKETTIMEDOUT'\n        ? `Socket timed out on request to ${options.url}`\n        : `Connection timed out on request to ${options.url}`\n    )\n    error.code = code\n    context.channels.error.publish(error)\n  }\n\n  function resetTimers() {\n    if (!delays) {\n      return\n    }\n\n    stopTimers()\n    timers.socket = setTimeout(() => timeoutRequest('ESOCKETTIMEDOUT'), delays.socket)\n  }\n\n  function stopTimers(force) {\n    // Only clear the connect timeout if we've got a connection\n    if (force || aborted || (xhr.readyState >= 2 && timers.connect)) {\n      clearTimeout(timers.connect)\n    }\n\n    if (timers.socket) {\n      clearTimeout(timers.socket)\n    }\n  }\n\n  function onError(error) {\n    if (loaded) {\n      return\n    }\n\n    // Clean up\n    stopTimers(true)\n    loaded = true\n    xhr = null\n\n    // Annoyingly, details are extremely scarce and hidden from us.\n    // We only really know that it is a network error\n    const err = error || new Error(`Network error while attempting to reach ${options.url}`)\n    err.isNetworkError = true\n    err.request = options\n    callback(err)\n  }\n\n  function reduceResponse() {\n    let statusCode = xhr.status\n    let statusMessage = xhr.statusText\n\n    if (isXdr && statusCode === undefined) {\n      // IE8 CORS GET successful response doesn't have a status field, but body is fine\n      statusCode = 200\n    } else if (statusCode > 12000 && statusCode < 12156) {\n      // Yet another IE quirk where it emits weird status codes on network errors\n      // https://support.microsoft.com/en-us/kb/193625\n      return onError()\n    } else {\n      // Another IE bug where HTTP 204 somehow ends up as 1223\n      statusCode = xhr.status === 1223 ? 204 : xhr.status\n      statusMessage = xhr.status === 1223 ? 'No Content' : statusMessage\n    }\n\n    return {\n      body: xhr.response || xhr.responseText,\n      url: options.url,\n      method: options.method,\n      headers: isXdr ? {} : parseHeaders(xhr.getAllResponseHeaders()),\n      statusCode: statusCode,\n      statusMessage: statusMessage\n    }\n  }\n\n  function onLoad() {\n    if (aborted || loaded || timedOut) {\n      return\n    }\n\n    if (xhr.status === 0) {\n      onError(new Error('Unknown XHR error'))\n      return\n    }\n\n    // Prevent being called twice\n    stopTimers()\n    loaded = true\n    callback(null, reduceResponse())\n  }\n}\n","/**\n * Mimicks the XMLHttpRequest API with only the parts needed for get-it's XHR adapter\n */\nfunction FetchXhr() {\n  this.readyState = 0 // Unsent\n}\nFetchXhr.prototype.open = function(method, url) {\n  this._method = method\n  this._url = url\n  this._resHeaders = ''\n  this.readyState = 1 // Open\n  this.onreadystatechange()\n}\nFetchXhr.prototype.abort = function() {\n  if (this._controller) {\n    this._controller.abort()\n  }\n}\nFetchXhr.prototype.getAllResponseHeaders = function() {\n  return this._resHeaders\n}\nFetchXhr.prototype.setRequestHeader = function(key, value) {\n  this._headers = this._headers || {}\n  this._headers[key] = value\n}\nFetchXhr.prototype.send = function(body) {\n  // eslint-disable-next-line no-multi-assign\n  const ctrl = (this._controller = typeof AbortController === 'function' && new AbortController())\n  const textBody = this.responseType !== 'arraybuffer'\n  const options = {\n    method: this._method,\n    headers: this._headers,\n    signal: ctrl && ctrl.signal,\n    body\n  }\n\n  // Some environments (like CloudFlare workers) don't support credentials in\n  // RequestInitDict, and there doesn't seem to be any easy way to check for it,\n  // so for now let's just make do with a window check :/\n  if (typeof window !== 'undefined') {\n    options.credentials = this.withCredentials ? 'include' : 'omit'\n  }\n\n  fetch(this._url, options)\n    .then(res => {\n      res.headers.forEach((value, key) => {\n        this._resHeaders += `${key}: ${value}\\r\\n`\n      })\n      this.status = res.status\n      this.statusText = res.statusText\n      this.readyState = 3 // Loading\n      return textBody ? res.text() : res.arrayBuffer()\n    })\n    .then(resBody => {\n      if (textBody) {\n        this.responseText = resBody\n      } else {\n        this.response = resBody\n      }\n      this.readyState = 4 // Done\n      this.onreadystatechange()\n    })\n    .catch(err => {\n      if (err.name === 'AbortError') {\n        this.onabort()\n        return\n      }\n\n      this.onerror(err)\n    })\n}\n\nmodule.exports = FetchXhr\n","module.exports = require('./node-request')\n","/* global globalThis */\n/* eslint-disable no-negated-condition */\nif (typeof globalThis !== 'undefined') {\n  module.exports = globalThis\n} else if (typeof window !== 'undefined') {\n  module.exports = window\n} else if (typeof global !== 'undefined') {\n  module.exports = global\n} else if (typeof self !== 'undefined') {\n  module.exports = self\n} else {\n  module.exports = {}\n}\n","module.exports = middleware => {\n  const applyMiddleware = (hook, defaultValue, ...args) => {\n    const bailEarly = hook === 'onError'\n\n    let value = defaultValue\n    for (let i = 0; i < middleware[hook].length; i++) {\n      const handler = middleware[hook][i]\n      value = handler(value, ...args)\n\n      if (bailEarly && !value) {\n        break\n      }\n    }\n\n    return value\n  }\n\n  return applyMiddleware\n}\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","// ISC @ Julien Fontanet\n\n\"use strict\";\n\n// ===================================================================\n\nvar construct = typeof Reflect !== \"undefined\" ? Reflect.construct : undefined;\nvar defineProperty = Object.defineProperty;\n\n// -------------------------------------------------------------------\n\nvar captureStackTrace = Error.captureStackTrace;\nif (captureStackTrace === undefined) {\n  captureStackTrace = function captureStackTrace(error) {\n    var container = new Error();\n\n    defineProperty(error, \"stack\", {\n      configurable: true,\n      get: function getStack() {\n        var stack = container.stack;\n\n        // Replace property with value for faster future accesses.\n        defineProperty(this, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n\n        return stack;\n      },\n      set: function setStack(stack) {\n        defineProperty(error, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n      },\n    });\n  };\n}\n\n// -------------------------------------------------------------------\n\nfunction BaseError(message) {\n  if (message !== undefined) {\n    defineProperty(this, \"message\", {\n      configurable: true,\n      value: message,\n      writable: true,\n    });\n  }\n\n  var cname = this.constructor.name;\n  if (cname !== undefined && cname !== this.name) {\n    defineProperty(this, \"name\", {\n      configurable: true,\n      value: cname,\n      writable: true,\n    });\n  }\n\n  captureStackTrace(this, this.constructor);\n}\n\nBaseError.prototype = Object.create(Error.prototype, {\n  // See: https://github.com/JsCommunity/make-error/issues/4\n  constructor: {\n    configurable: true,\n    value: BaseError,\n    writable: true,\n  },\n});\n\n// -------------------------------------------------------------------\n\n// Sets the name of a function if possible (depends of the JS engine).\nvar setFunctionName = (function() {\n  function setFunctionName(fn, name) {\n    return defineProperty(fn, \"name\", {\n      configurable: true,\n      value: name,\n    });\n  }\n  try {\n    var f = function() {};\n    setFunctionName(f, \"foo\");\n    if (f.name === \"foo\") {\n      return setFunctionName;\n    }\n  } catch (_) {}\n})();\n\n// -------------------------------------------------------------------\n\nfunction makeError(constructor, super_) {\n  if (super_ == null || super_ === Error) {\n    super_ = BaseError;\n  } else if (typeof super_ !== \"function\") {\n    throw new TypeError(\"super_ should be a function\");\n  }\n\n  var name;\n  if (typeof constructor === \"string\") {\n    name = constructor;\n    constructor =\n      construct !== undefined\n        ? function() {\n            return construct(super_, arguments, this.constructor);\n          }\n        : function() {\n            super_.apply(this, arguments);\n          };\n\n    // If the name can be set, do it once and for all.\n    if (setFunctionName !== undefined) {\n      setFunctionName(constructor, name);\n      name = undefined;\n    }\n  } else if (typeof constructor !== \"function\") {\n    throw new TypeError(\"constructor should be either a string or a function\");\n  }\n\n  // Also register the super constructor also as `constructor.super_` just\n  // like Node's `util.inherits()`.\n  //\n  // eslint-disable-next-line dot-notation\n  constructor.super_ = constructor[\"super\"] = super_;\n\n  var properties = {\n    constructor: {\n      configurable: true,\n      value: constructor,\n      writable: true,\n    },\n  };\n\n  // If the name could not be set on the constructor, set it on the\n  // prototype.\n  if (name !== undefined) {\n    properties.name = {\n      configurable: true,\n      value: name,\n      writable: true,\n    };\n  }\n  constructor.prototype = Object.create(super_.prototype, properties);\n\n  return constructor;\n}\nexports = module.exports = makeError;\nexports.BaseError = BaseError;\n","module.exports = function Pubsub() {\n  var subscribers = []\n  return {\n    subscribe: subscribe,\n    publish: publish\n  }\n  function subscribe(subscriber) {\n    subscribers.push(subscriber)\n    return function unsubscribe() {\n      var idx = subscribers.indexOf(subscriber)\n      if (idx > -1) {\n        subscribers.splice(idx, 1)\n      }\n    }\n  }\n  function publish() {\n    for (var i = 0; i < subscribers.length; i++) {\n      subscribers[i].apply(null, arguments)\n    }\n  }\n}","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","import { Operator } from './Operator';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, PartialObserver, Subscribable } from './types';\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { iif } from './observable/iif';\nimport { throwError } from './observable/throwError';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n\n  /** Internal implementation detail, do not use directly. */\n  public _isScalar: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  source: Observable<any>;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  operator: Operator<any, T>;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new cold Observable by calling the Observable constructor\n   * @static true\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new cold observable\n   * @nocollapse\n   * @deprecated use new Observable() instead\n   */\n  static create: Function = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  }\n\n  /**\n   * Creates a new Observable, with this Observable as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param {Operator} operator the operator defining the operation to take on the observable\n   * @return {Observable} a new observable with the Operator applied\n   */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observer?: PartialObserver<T>): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: null | undefined, error: null | undefined, complete: () => void): Subscription;\n  /** @deprecated Use an observer instead of an error callback */\n  subscribe(next: null | undefined, error: (error: any) => void, complete?: () => void): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: (value: T) => void, error: null | undefined, complete: () => void): Subscription;\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided, all errors will\n   * be left uncaught.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of Observer,\n   * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * ## Example\n   * ### Subscribe with an Observer\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Subscribe with functions\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Cancel a subscription\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe(\n   *   num => console.log(num),\n   *   undefined,\n   *   () => {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * );\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // \"unsubscribed!\" after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   *  Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   *  the error will be thrown as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {ISubscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(observerOrNext?: PartialObserver<T> | ((value: T) => void),\n            error?: (error: any) => void,\n            complete?: () => void): Subscription {\n\n    const { operator } = this;\n    const sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(\n        this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n        this._subscribe(sink) :\n        this._trySubscribe(sink)\n      );\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  }\n\n  /**\n   * @method forEach\n   * @param {Function} next a handler for each value emitted by the observable\n   * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n   * @return {Promise} a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      // Must be declared in a separate statement to avoid a ReferenceError when\n      // accessing subscription below in the closure due to Temporal Dead Zone.\n      let subscription: Subscription;\n      subscription = this.subscribe((value) => {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    }) as Promise<void>;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    const { source } = this;\n    return source && source.subscribe(subscriber);\n  }\n\n  // `if` and `throw` are special snow flakes, the compiler sees them as reserved words. Deprecated in\n  // favor of iif and throwError functions.\n  /**\n   * @nocollapse\n   * @deprecated In favor of iif creation function: import { iif } from 'rxjs';\n   */\n  static if: typeof iif;\n  /**\n   * @nocollapse\n   * @deprecated In favor of throwError creation function: import { throwError } from 'rxjs';\n   */\n  static throw: typeof throwError;\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>): Observable<D>;\n  pipe<A, B, C, D, E>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>): Observable<E>;\n  pipe<A, B, C, D, E, F>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>, ...operations: OperatorFunction<any, any>[]): Observable<{}>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ### Example\n   * ```ts\n   * import { interval } from 'rxjs';\n   * import { map, filter, scan } from 'rxjs/operators';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x))\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    if (operations.length === 0) {\n      return this as any;\n    }\n\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  toPromise<T>(this: Observable<T>): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: typeof Promise): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: PromiseConstructorLike): Promise<T>;\n  /* tslint:enable:max-line-length */\n\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: any;\n      this.subscribe((x: T) => value = x, (err: any) => reject(err), () => resolve(value));\n    }) as Promise<T>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}\n","import { Observer } from './types';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nexport const empty: Observer<any> = {\n  closed: true,\n  next(value: any): void { /* noop */},\n  error(err: any): void {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete(): void { /*noop*/ }\n};\n","import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Observer, PartialObserver, TeardownLogic } from './types';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n\n  [rxSubscriberSymbol]() { return this; }\n\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   */\n  static create<T>(next?: (x?: T) => void,\n                   error?: (e?: any) => void,\n                   complete?: () => void): Subscriber<T> {\n    const subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  }\n\n  /** @internal */ syncErrorValue: any = null;\n  /** @internal */ syncErrorThrown: boolean = false;\n  /** @internal */ syncErrorThrowable: boolean = false;\n\n  protected isStopped: boolean = false;\n  protected destination: PartialObserver<any> | Subscriber<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  constructor(destinationOrNext?: PartialObserver<any> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    switch (arguments.length) {\n      case 0:\n        this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            this.destination = destinationOrNext;\n            destinationOrNext.add(this);\n          } else {\n            this.syncErrorThrowable = true;\n            this.destination = new SafeSubscriber<T>(this, <PartialObserver<any>> destinationOrNext);\n          }\n          break;\n        }\n      default:\n        this.syncErrorThrowable = true;\n        this.destination = new SafeSubscriber<T>(this, <((value: T) => void)> destinationOrNext, error, complete);\n        break;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    super.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.destination.complete();\n    this.unsubscribe();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const {  _parentOrParents } = this;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SafeSubscriber<T> extends Subscriber<T> {\n\n  private _context: any;\n\n  constructor(private _parentSubscriber: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    let next: ((value: T) => void);\n    let context: any = this;\n\n    if (isFunction(observerOrNext)) {\n      next = (<((value: T) => void)> observerOrNext);\n    } else if (observerOrNext) {\n      next = (<PartialObserver<T>> observerOrNext).next;\n      error = (<PartialObserver<T>> observerOrNext).error;\n      complete = (<PartialObserver<T>> observerOrNext).complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          this.add(<() => void> context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = this.unsubscribe.bind(this);\n      }\n    }\n\n    this._context = context;\n    this._next = next;\n    this._error = error;\n    this._complete = complete;\n  }\n\n  next(value?: T): void {\n    if (!this.isStopped && this._next) {\n      const { _parentSubscriber } = this;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  error(err?: any): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      const { useDeprecatedSynchronousErrorHandling } = config;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  }\n\n  complete(): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      if (this._complete) {\n        const wrappedComplete = () => this._complete.call(this._context);\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  private __tryOrUnsub(fn: Function, value?: any): void {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  }\n\n  private __tryOrSetError(parent: Subscriber<T>, fn: Function, value?: any): boolean {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _unsubscribe(): void {\n    const { _parentSubscriber } = this;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  }\n}\n","import { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic } from './types';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY: Subscription = (function(empty: any) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription()));\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   * @type {boolean}\n   */\n  public closed: boolean = false;\n\n  /** @internal */\n  protected _parentOrParents: Subscription | Subscription[] = null;\n  /** @internal */\n  private _subscriptions: SubscriptionLike[] = null;\n\n  /**\n   * @param {function(): void} [unsubscribe] A function describing how to\n   * perform the disposal of resources when the `unsubscribe` method is called.\n   */\n  constructor(unsubscribe?: () => void) {\n    if (unsubscribe) {\n      (this as any)._ctorUnsubscribe = true;\n      (this as any)._unsubscribe = unsubscribe;\n    }\n  }\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[];\n\n    if (this.closed) {\n      return;\n    }\n\n    let { _parentOrParents, _ctorUnsubscribe, _unsubscribe, _subscriptions } = (this as any);\n\n    this.closed = true;\n    this._parentOrParents = null;\n    // null out _subscriptions first so any child subscriptions that attempt\n    // to remove themselves from this subscription will noop\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (let index = 0; index < _parentOrParents.length; ++index) {\n        const parent = _parentOrParents[index];\n        parent.remove(this);\n      }\n    }\n\n    if (isFunction(_unsubscribe)) {\n      // It's only possible to null _unsubscribe - to release the reference to\n      // any teardown function passed in the constructor - if the property was\n      // actually assigned in the constructor, as there are some classes that\n      // are derived from Subscriber (which derives from Subscription) that\n      // implement an _unsubscribe method as a mechanism for obtaining\n      // unsubscription notifications and some of those subscribers are\n      // recycled. Also, in some of those subscribers, _unsubscribe switches\n      // from a prototype method to an instance property - see notifyNext in\n      // RetryWhenSubscriber.\n      if (_ctorUnsubscribe) {\n        (this as any)._unsubscribe = undefined;\n      }\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray(_subscriptions)) {\n      let index = -1;\n      let len = _subscriptions.length;\n\n      while (++index < len) {\n        const sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription. Can also be used to add a child subscription.\n   *\n   * If the tear down being added is a subscription that is already\n   * unsubscribed, is the same reference `add` is being called on, or is\n   * `Subscription.EMPTY`, it will not be added.\n   *\n   * If this subscription is already in an `closed` state, the passed\n   * tear down logic will be executed immediately.\n   *\n   * When a parent subscription is unsubscribed, any child subscriptions that were added to it are also unsubscribed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown: TeardownLogic): Subscription {\n    let subscription = (<Subscription>teardown);\n\n    if (!teardown) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(<(() => void)>teardown);\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          // This also covers the case where `subscription` is `Subscription.EMPTY`, which is always in `closed` state.\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          const tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n      }\n    }\n\n    // Add `this` as parent of `subscription` if that's not already the case.\n    let { _parentOrParents } = subscription;\n    if (_parentOrParents === null) {\n      // If we don't have a parent, then set `subscription._parents` to\n      // the `this`, which is the common case that we optimize for.\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        // The `subscription` already has `this` as a parent.\n        return subscription;\n      }\n      // If there's already one parent, but not multiple, allocate an\n      // Array to store the rest of the parent Subscriptions.\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      // Only add `this` to the _parentOrParents list if it's not already there.\n      _parentOrParents.push(this);\n    } else {\n      // The `subscription` already has `this` as a parent.\n      return subscription;\n    }\n\n    // Optimize for the common case when adding the first subscription.\n    const subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  }\n\n  /**\n   * Removes a Subscription from the internal list of subscriptions that will\n   * unsubscribe during the unsubscribe process of this Subscription.\n   * @param {Subscription} subscription The subscription to remove.\n   * @return {void}\n   */\n  remove(subscription: Subscription): void {\n    const subscriptions = this._subscriptions;\n    if (subscriptions) {\n      const subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  }\n}\n\nfunction flattenUnsubscriptionErrors(errors: any[]) {\n return errors.reduce((errs, err) => errs.concat((err instanceof UnsubscriptionError) ? err.errors : err), []);\n}\n","let _enable_super_gross_mode_that_will_cause_bad_things = false;\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport const config = {\n  /**\n   * The promise constructor used by default for methods such as\n   * {@link toPromise} and {@link forEach}\n   */\n  Promise: undefined as PromiseConstructorLike,\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n   * FOR MIGRATION REASONS.\n   */\n  set useDeprecatedSynchronousErrorHandling(value: boolean) {\n    if (value) {\n      const error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  },\n};\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S,\n                                       thisArg?: any): OperatorFunction<T, S>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n * Emit only click events whose target was a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { filter } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => ev.target.tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T> {\n  return function filterOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\n\nclass FilterOperator<T> implements Operator<T, T> {\n  constructor(private predicate: (value: T, index: number) => boolean,\n              private thisArg?: any) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass FilterSubscriber<T> extends Subscriber<T> {\n\n  count: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number) => boolean,\n              private thisArg: any) {\n    super(destination);\n  }\n\n  // the try catch block below is left specifically for\n  // optimization and perf reasons. a tryCatcher is not necessary here.\n  protected _next(value: T) {\n    let result: any;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.destination.next(value);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n * Map every click to the clientX position of that click\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return function mapOperation(source: Observable<T>): Observable<R> {\n    if (typeof project !== 'function') {\n      throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\n\nexport class MapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => R, private thisArg: any) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MapSubscriber<T, R> extends Subscriber<T> {\n  count: number = 0;\n  private thisArg: any;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => R,\n              thisArg: any) {\n    super(destination);\n    this.thisArg = thisArg || this;\n  }\n\n  // NOTE: This looks unoptimized, but it's actually purposefully NOT\n  // using try/catch optimizations.\n  protected _next(value: T) {\n    let result: R;\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\nexport const observable = (() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\n","/** @deprecated do not use, this is no longer checked by RxJS internals */\nexport const rxSubscriber = (() =>\n  typeof Symbol === 'function'\n    ? Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + Math.random())();\n\n/**\n * @deprecated use rxSubscriber instead\n */\nexport const $$rxSubscriber = rxSubscriber;\n","export interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  new(errors: any[]): UnsubscriptionError;\n}\n\nconst UnsubscriptionErrorImpl = (() => {\n  function UnsubscriptionErrorImpl(this: any, errors: any[]) {\n    Error.call(this);\n    this.message = errors ?\n      `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}` : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n\n  return UnsubscriptionErrorImpl;\n})();\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = UnsubscriptionErrorImpl as any;","import { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\n\n/**\n * Determines whether the ErrorObserver is closed or stopped or has a\n * destination that is closed or stopped - in which case errors will\n * need to be reported via a different mechanism.\n * @param observer the observer\n */\nexport function canReportError(observer: Subscriber<any> | Subject<any>): boolean {\n  while (observer) {\n    const { closed, destination, isStopped } = observer as any;\n    if (closed || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nexport function hostReportError(err: any) {\n  setTimeout(() => { throw err; }, 0);\n}","export function identity<T>(x: T): T {\n  return x;\n}\n","export const isArray = (() => Array.isArray || (<T>(x: any): x is T[] => x && typeof x.length === 'number'))();\n","export function isFunction(x: any): x is Function {\n  return typeof x === 'function';\n}\n","export function isObject(x: any): x is Object {\n  return x !== null && typeof x === 'object';\n}\n","import { noop } from './noop';\nimport { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pipe<T>(): UnaryFunction<T, T>;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>, ...fns: UnaryFunction<any, any>[]): UnaryFunction<T, {}>;\n/* tslint:enable:max-line-length */\n\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nimport { PartialObserver } from '../types';\n\nexport function toSubscriber<T>(\n  nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n  error?: (error: any) => void,\n  complete?: () => void): Subscriber<T> {\n\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return (<Subscriber<T>> nextOrObserver);\n    }\n\n    if (nextOrObserver[rxSubscriberSymbol]) {\n      return nextOrObserver[rxSubscriberSymbol]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(emptyObserver);\n  }\n\n  return new Subscriber(nextOrObserver, error, complete);\n}\n","'use strict';\n\nvar url = require('url');\n\nmodule.exports = function(uri1, uri2, ieMode) {\n    if (uri1 === uri2) {\n        return true;\n    }\n\n    var url1 = url.parse(uri1, false, true);\n    var url2 = url.parse(uri2, false, true);\n\n    var url1Port = url1.port|0 || (url1.protocol === 'https' ? 443 : 80);\n    var url2Port = url2.port|0 || (url2.protocol === 'https' ? 443 : 80);\n\n    var match = {\n        proto: url1.protocol === url2.protocol,\n        hostname: url1.hostname === url2.hostname,\n        port: url1Port === url2Port\n    };\n\n    return ((match.proto && match.hostname) && (match.port || ieMode));\n};","/**\n * This file is only used for the browser version of `same-origin`.\n * Used to bring down the size of the browser bundle.\n */\n'use strict';\n\nvar regex = /^(?:(?:(?:([^:\\/#\\?]+:)?(?:(?:\\/\\/)((?:((?:[^:@\\/#\\?]+)(?:\\:(?:[^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((?:\\/?(?:[^\\/\\?#]+\\/+)*)(?:[^\\?#]*)))?(\\?[^#]+)?)(#.*)?/;\n\nmodule.exports = {\n    regex: regex,\n    parse: function(url) {\n        var match = regex.exec(url);\n        if (!match) {\n            return {};\n        }\n\n        return {\n            protocol: (match[1] || '').toLowerCase() || undefined,\n            hostname: (match[5] || '').toLowerCase() || undefined,\n            port: match[6] || undefined\n        };\n    }\n};","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/\n  , whitespace = /^[ \\f\\n\\r\\t\\v\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/;\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(whitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !url.host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n"],"names":["self","define","EventSource","url","options","SyntaxError","this","URL","setOptions","evs","setTimeout","poll","prototype","CONNECTING","OPEN","CLOSED","defaultOptions","loggingEnabled","loggingPrefix","interval","bufferSizeLimit","silentTimeout","getArgs","evs_buffer_size_limit","xhrHeaders","Accept","option","defaults","hasOwnProperty","console","log","message","readyState","cleanup","cursor","cache","_xhr","XHR","resetNoActivityTimer","err","dispatchEvent","type","data","pollAgain","_pollTimer","clearInterval","_noActivityTimer","abort","close","_onxhrdata","request","isReady","hasError","buffer","getBuffer","length","substring","lastMessageIndex","newcursor","toparse","parseStream","isDone","chunk","i","j","eventType","datas","line","retry","events","normalizeToLF","split","parts","trimWhiteSpace","indexOf","replace","parseInt","isNaN","push","lastEventId","event","MessageEvent","join","window","location","origin","handlers","call","addEventListener","handler","removeEventListener","splice","_noactivityTimer","onerror","onmessage","onopen","urlWithParams","baseURL","params","encodedArgs","key","urlarg","urlize","encodeURIComponent","text","ln2","lastIndexOf","lr2","lrln2","Math","max","str","reTrim","isOldIE","isPolyfill","evs_preamble","XDomainRequest","_request","onprogress","_ready","onload","_loaded","_failed","ontimeout","reqGetArgs","defaultArgs","evs_last_event_id","open","send","useXDomainRequest","rv","responseText","XMLHttpRequest","onreadystatechange","status","headers","header","setRequestHeader","bubbles","cancelBubble","cancelable","Boolean","undefined","responseType","module","exports","objectAssign","require","buildMarksTree","nestLists","generateKeys","mergeSerializers","optionProps","imageOptions","ignoreUnknownTypes","isListItem","block","h","properties","defaultSerializers","serializeSpan","props","rawBlocks","Array","keyedBlocks","blocks","serializers","value","opts","list","level","children","serializeList","tree","node","index","serializeListItem","siblings","findListItemIndex","isSpan","serializeNode","blockProps","isInline","serializeBlock","renderContainerOnSingleChild","nodes","containerProps","className","defaultMarks","sortMarksByOccurences","span","spans","markOccurences","occurences","siblingIndex","sibling","sortByOccurence","sortMarks","markA","markB","aOccurences","bOccurences","aDefaultPos","bDefaultPos","markDefs","sortedMarks","rootNode","_type","nodeStack","marksNeeded","pos","mark","currentNode","findLastParentNode","_key","def","markKey","lines","lastNode","checksum","hash","strlen","item","JSON","generateHelpUrl","urlBuilder","enc","materializeError","projectId","dataset","asset","Error","query","keys","Object","getQueryString","getSerializers","blocksToNodes","getImageUrl","renderNode","userSerializers","acc","isDefined","isListBlock","blockMatchesList","listFromBlock","listItem","lastChild","findListMatching","matching","filterOnType","mode","currentList","newList","lastListItem","newLastChild","match","serializeOptions","serializerOpts","useDashedStyles","tag","types","style","test","image","img","src","marks","strong","RawMarkSerializer","em","code","underline","textDecoration","link","href","blockType","serializer","markType","hardBreak","unknownType","display","unknownMark","container","empty","serializedNode","slug","example","parseAssetId","ref","id","dimensionString","format","width","imgWidthStr","height","imgHeightStr","isFinite","isRef","isAsset","isAssetStub","source","parseSource","isUrl","_ref","urlToId","applyDefaults","result","left","top","bottom","right","x","y","SPEC_NAME_TO_URL_NAME_MAPPINGS","urlForImage","spec","cropLeft","cropTop","crop","hotSpotVerticalRadius","hotSpotHorizontalRadius","hotSpotCenterX","hotSpotCenterY","hotspot","fit","specToImageUrl","cdnUrl","filename","baseUrl","flip","specName","mapping","param","imgWidth","imgHeight","rect","desiredAspectRatio","cropRect","validFits","validCrops","validAutoModes","client","entry","isSanityClientLike","apiUrl","ImageUrlBuilder","apiHost","parent","withOptions","newOptions","rewriteSpecName","bg","dpr","focalPoint","maxWidth","minWidth","maxHeight","minHeight","size","blur","sharpen","invert","orientation","quality","forceDownload","download","flipHorizontal","flipVertical","ignoreImageParams","saturation","auto","pad","toString","React","PropTypes","internals","renderProps","SanityBlockContent","customSerializers","assign","shape","func","oneOfType","arrayOf","isRequired","nestMarks","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","name","getShim","ReactPropTypes","array","bigint","bool","number","object","string","symbol","any","element","elementType","instanceOf","objectOf","oneOf","exact","checkPropTypes","_slicedToArray","arr","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_arr","_n","_d","next","done","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","slice","constructor","from","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_require","map","filter","queryString","validators","AssetsClient","optionsFromFile","file","File","preserveFilename","contentType","upload","assetType","body","arguments","validateAssetType","meta","extract","hasDataset","clientConfig","assetEndpoint","label","title","description","creditLine","sourceId","sourceName","sourceUrl","observable","_requestObservable","method","timeout","uri","concat","isPromiseAPI","pipe","document","toPromise","delete","warn","docId","_id","_id$split2","assetId","_this$client$clientCo","qs","AuthClient","getLoginProviders","logout","validate","warnings","defaultConfig","apiVersion","useProjectHostname","LOCALHOSTS","initConfig","config","prevConfig","specifiedConfig","printNoApiVersionSpecifiedWarning","newConfig","projectBased","Promise","helpUrl","isBrowser","hostname","isLocalhost","host","isLocal","token","ignoreBrowserTokenWarning","printBrowserTokenWarning","useCdn","printCdnWarning","requestTagPrefix","requestTag","isDefaultApi","withCredentials","validateApiVersion","hostParts","protocol","cdnHost","apiDate","Date","getTime","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","configurable","writable","getSelection","encodeQueryString","Transaction","Patch","listen","excludeFalsey","defValue","getMutationQuery","returnIds","returnDocuments","visibility","skipCrossDatasetReferenceValidation","isResponse","getBody","indexBy","docs","attr","reduce","indexed","doc","create","getDataUrl","operation","path","catalog","baseUri","fetch","mapResponse","filterResponse","res","_dataRequest","getDocument","json","documents","getDocuments","ids","_create","createIfNotExists","requireDocumentId","createOrReplace","patch","selector","operations","selection","dataRequest","mutations","mutate","mut","serialize","muts","transactionId","transaction","endpoint","isMutation","isQuery","strQuery","useGet","stringQuery","returnFirst","reqOptions","canUseCdn","results","op","mutation","_excluded","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_ref$params","_ref$options","q","base","qString","stringify","Observable","polyfilledEventSource","pick","once","tokenWarning","printTokenWarning","isWindowEventSource","possibleOptions","includeResult","parseEvent","parse","cooerceError","evt","error","extractErrorMessage","_this$clientConfig","listenOpts","observer","listenFor","shouldEmitReconnect","esOptions","Authorization","reconnectTimer","es","getEventSource","stopped","onError","unsubscribe","clearTimeout","onChannelError","onMessage","onDisconnect","complete","validateObject","validateInsert","clone","set","_assign","diffMatchPatch","unset","attrs","setIfMissing","_set","$","inc","dec","insert","at","items","_this$_assign","append","prepend","start","deleteCount","startIndex","delCount","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","toJSON","commit","reset","merge","defaultMutateOptions","trxId","_add","documentId","validateDocumentId","patchOps","isBuilder","DatasetsClient","bind","_modify","edit","makeError","ClientError","extractErrorProps","super","ServerError","response","statusCode","responseBody","stringifyBody","details","statusMessage","httpErrorMessage","toLowerCase","getIt","jsonRequest","jsonResponse","progress","_require2","httpError","onResponse","printWarnings","msg","implementation","httpRequest","requester","maxRedirects","defaultRequester","projectHeader","overrides","useGlobalApi","proxy","ProjectsClient","getById","dataMethods","UsersClient","getRequestOptions","SanityClient","assets","datasets","projects","users","auth","observableConfig","withConfig","getUrl","_this","subscriber","subscribe","prop","sel","selectionOpts","fn","returnValue","didCall","_typeof","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","val","signature","valid","loc","createWarningPrinter","_console","_len","args","const","hotspotXCenter","hotspotYCenter","specs","pubsub","middlewareReducer","processOptions","validateOptions","httpRequester","channelNames","middlehooks","createRequester","initMiddleware","loadedMiddleware","middleware","ware","channels","applyMiddleware","context","ongoingRequest","ctx","newMiddleware","urlParse","isReactNative","navigator","has","stringifyQueryString","pairs","normalizeTimeout","time","delay","Number","connect","socket","removeUndefined","validUrl","isPlainObject","serializeTypes","tryParse","shouldDecode","global","onReturn","onRequest","xhr","handleProgress","percent","stage","total","loaded","lengthComputable","sameOrigin","parseHeaders","FetchXhr","win","adapter","XmlHttpRequest","hasXhr2","XDR","CrossDomainRequest","timers","cors","injectedResponse","cbTimer","callback","isXdr","delays","aborted","timedOut","stopTimers","timeoutRequest","resetTimers","reduceResponse","onLoad","force","_headers","ctrl","_controller","AbortController","textBody","signal","resBody","globalThis","hook","defaultValue","bailEarly","isObject","isObjectObject","ctor","prot","construct","Reflect","captureStackTrace","BaseError","cname","get","stack","setFunctionName","f","_","super_","subscribers","idx","publish","trim","arg","headersArr","row","decode","input","decodeURIComponent","e","encode","prefix","undef","part","parser","exec","port","_isScalar","_subscribe","lift","operator","observerOrNext","sink","toSubscriber","add","useDeprecatedSynchronousErrorHandling","syncErrorThrowable","_trySubscribe","syncErrorThrown","syncErrorValue","canReportError","promiseCtor","getPromiseCtor","resolve","reject","subscription","pipeFromArray","closed","hostReportError","destinationOrNext","isStopped","destination","Subscriber","SafeSubscriber","rxSubscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentOrParents","Subscription","_parentSubscriber","isFunction","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","_unsubscribe","_subscriptions","_ctorUnsubscribe","errors","remove","UnsubscriptionError","flattenUnsubscriptionErrors","sub","teardown","EMPTY","tmp","subscriptions","subscriptionIndex","errs","_enable_super_gross_mode_that_will_cause_bad_things","predicate","thisArg","FilterOperator","FilterSubscriber","count","project","MapOperator","MapSubscriber","random","$$rxSubscriber","UnsubscriptionErrorImpl","fns","identity","prev","nextOrObserver","uri1","uri2","ieMode","url1","url2","url1Port","url2Port","proto","regex","required","CRHTLF","slashes","protocolre","windowsDriveLetter","whitespace","trimLeft","rules","address","isSpecial","NaN","ignore","lolcation","finaldestination","Url","unescape","pathname","scheme","extractProtocol","rest","forwardSlashes","otherSlashes","slashesCount","relative","extracted","instruction","instructions","charAt","last","unshift","up","username","password","pop","char","ins"],"sourceRoot":""}